{"version":3,"sources":["src\\common\\logUtils.js"],"names":["logLevel","logonoff","writeonoff","writeurl","doLog","sMethod","aArgs","console","log","imei","plus","device","imsi","model","vendor","uuid","mui","ajax","data","loginfo","toString","type","success","error","xhr","errorThrown","inspect","complete","Logger","sModule","getLogProp","_name","methods","i","len","length","method","prototype","sDate","dateFormat","Date","Array","slice","call","arguments","unshift","push","moduleName","debug","info","warn"],"mappings":"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","file":"logUtils.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["'use strict';\r\n/*!\r\n * logUtils.js v1.0.0\r\n * 日志工具类\r\n *\r\n * Author: liaoxm\r\n * Date: 2016-06-16\r\n *\r\n */\r\nimport dateFormat from './dateFormat';\r\nimport prop from './propUtils';\r\n// import muiUtils from './muiUtils';\nlet logLevel = 0; // 日志级别，0:'log',1:'debug',2:'info',3:'error',4:'warn'\r\nlet logonoff = 0; // 默认是开启日志的\r\nlet writeonoff = 0; // 服务器写日志开关 0-开启 1-关闭\nlet writeurl = 'http://192.168.2.61:8888/api/facade/log/write'; // 写日志服务器URL\r\n/**\r\n * 日志工具类封装\r\n * @param {Object} sMethod\r\n * @param {Object} aArgs\r\n * @private\r\n */\r\nfunction doLog(sMethod, aArgs) {\r\n    if (logonoff === 1) {\r\n        return;\r\n    }\r\n    console.log(aArgs);\r\n  //  if(navigator.userAgent.toLowerCase().indexOf('msie') > -1){\r\n  //      Function.apply.apply(console[sMethod], [console, aArgs]);\r\n  //  }else{\r\n  //      console[sMethod].apply(console,aArgs);\r\n  //  }\r\n  // 往控制台输出日志，上面代码在手机端执行有点问题，直接console处理了\r\n    if (writeonoff === 0) {\r\n        var imei = plus.device.imei;\r\n        var imsi = plus.device.imsi;\r\n        var model = plus.device.model;\r\n        var vendor = plus.device.vendor;\r\n        var uuid = plus.device.uuid;\r\n        mui.ajax(writeurl, {\r\n            data: {\r\n                imei: imei,\r\n                imsi: imsi,\r\n                model: model,\r\n                vendor: vendor,\r\n                uuid: uuid,\r\n                loginfo: aArgs.toString()\r\n            },\r\n            type: 'post',\r\n            success: () => {\n            },\r\n            error: (xhr, type, errorThrown) => {\r\n                console.log('server write log error');\r\n            },\r\n            inspect: () => {\n            },\r\n            complete: () => {\n            }\r\n        });\r\n    }\n}\r\n/**\r\n * 日志工具类\r\n * @param {String} sModule\r\n */\r\nconst Logger = function(sModule) {\r\n  // 读取配置文件，配置日志情况\r\n    logonoff = prop.getLogProp('logonoff');\r\n    logLevel = prop.getLogProp('loglevel');\r\n    let _name = sModule;\r\n    var methods = ['log', 'debug', 'info', 'error', 'warn'];\r\n    for (var i = 0, len = methods.length; i < len; i++) {\r\n        (function(method) {\r\n            Logger.prototype[method] = function() {\r\n                var sDate = '[' + dateFormat.dateFormat(new Date()) + ']';\r\n                var aArgs = Array.prototype.slice.call(arguments, 0);\r\n                aArgs.unshift(sDate);\r\n                aArgs.push('(' + method + ' ' + _name + ')');\r\n                doLog(method, aArgs);\r\n            };\r\n        })(methods[i]);\r\n    }\r\n};\r\n\r\n/**\r\n * 日志工具类log\r\n * @param {String} log 需要输出的内容\r\n * @param {String} moduleName 模块名称，这里因为没有办法自动获取，所以就请手动添加，一般就写文件名称和行数\r\n * @public\r\n */\r\nconst log = (log, moduleName) => {\r\n    if (logLevel >= 0) {\r\n        (new Logger(moduleName)).log(log);\r\n    }\r\n};\r\n/**\r\n * 日志工具类debug\r\n * @param {String} log 需要输出的内容\r\n * @param {String} moduleName 模块名称，这里因为没有办法自动获取，所以就请手动添加，一般就写文件名称和行数\r\n * @public\r\n */\r\nconst debug = (log, moduleName) => {\r\n    if (logLevel >= 1) {\r\n        (new Logger(moduleName)).debug(log);\r\n    }\r\n};\r\n/**\r\n * 日志工具类info\r\n * @param {String} log 需要输出的内容\r\n * @param {String} moduleName 模块名称，这里因为没有办法自动获取，所以就请手动添加，一般就写文件名称和行数\r\n * @public\r\n */\r\nconst info = (log, moduleName) => {\r\n    if (logLevel >= 2) {\r\n        (new Logger(moduleName)).info(log);\r\n    }\r\n};\r\n/**\r\n * 日志工具类error\r\n * @param {String} log 需要输出的内容\r\n * @param {String} moduleName 模块名称，这里因为没有办法自动获取，所以就请手动添加，一般就写文件名称和行数\r\n * @public\r\n */\r\nconst error = (log, moduleName) => {\r\n    if (logLevel >= 3) {\r\n        (new Logger(moduleName)).error(log);\r\n    }\r\n};\r\n/**\r\n * 日志工具类warn\r\n * @param {String} log 需要输出的内容\r\n * @param {String} moduleName 模块名称，这里因为没有办法自动获取，所以就请手动添加，一般就写文件名称和行数\r\n * @public\r\n */\r\nconst warn = (log, moduleName) => {\r\n    if (logLevel >= 4) {\r\n        (new Logger(moduleName)).warn(log);\r\n    }\r\n};\r\n\r\nexport default {\r\n    log,\r\n    debug,\r\n    info,\r\n    error,\r\n    warn\n};\r\n"]}