{"version":3,"sources":["src\\common\\muiUtils.js"],"names":["openWindow","url","id","options","unsafeTap","styles","popGesture","softinputMode","show","autoShow","aniShow","duration","waiting","createNew","blacklist","getProperty","some","item","localStorage","PREFIX_LOGIN","setObject","LOGIN_FORWORD","log","isValidLogin","loginValid","hideKeyBord","setStatusStyleForPageId","gotoPage","plus","webview","getWebviewById","pagelist","mui","fire","WEBVIEW_SHOW_EVENT","extras","hide","controlOpenPage","isClose","setTimeout","closWebview","popGestureEvent","setStatusStyle","window","getItem","navigator","setStatusBarBackground","setStatusBarStyle","setItem","tapFirst","Date","getTime","sbb","sbs","addEventListener","e","getStatusBarBackground","getStatusBarStyle","type","result","progress","currentWebview","maxNum","allView","all","filter","length","splice","map","close","closeAllOpenPage","openPreWindow","o","getObject","PAGE_URL","buyer_index","login","accessToken","get","LOGIN_ACCESS_TOKEN","undefined","openIndex","index","LOGIN_OUT_EVENT","LOGIN_COMPUTER_EVENT","openIndexWindow","seller_index","getNetworkType","types","networkinfo","CONNECTION_UNKNOW","CONNECTION_NONE","CONNECTION_ETHERNET","CONNECTION_WIFI","CONNECTION_CELL2G","CONNECTION_CELL3G","CONNECTION_CELL4G","getCurrentType","getNetworkTypeZH","forwordError","error_connect","muiAjax","loading","stringify","ajaxSettings","inspect","ajaxInspect","success","ajaxSuccess","error","ajaxError","complete","ajaxComplete","timeout","ajaxBeforeSend","ajax","cb","opt","ops","login_index","headers","token","instanceId","APP_INSTANCE_ID","uuidV4","set","instance_id","access_token","reqStartTime","w","nativeUI","showWaiting","data","xhr","setting","reqTime","inspecttype","inspecterror","tempData","result_data","header","code","error_code","msg","error_message","error_data","ERROR_CODE","INSUFFICIENT_PERMISSIONS","getResponseHeader","status","getLoginUserInfo","userInfo","USER_INFO","clearMemory","onlyMemory","clear","cookie","sessionStorage","document","documentElement","clientHeight","pageOldH","nativeWebview","nativeInstanceObject","os","android","ios","tagName","activeElement","toLowerCase","blur","plusCallMethod","input","createElement","body","appendChild","focus","removeChild"],"mappings":"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","file":"muiUtils.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["'use strict';\n/*!\n * muiUitls.js v1.0.0\n * 基于mui进行封装的工具类<br>\n *\n * Author: liaoxm\n * Date: 2016-06-16\n * 使用方法：\n *        import muiUitls from 'muiUitls.js'\n *        muiUitls.openWindow(url,id,opts)\n */\nimport merge from 'webpack-merge';\nimport logger from './logUtils';\nimport propUtils from './propUtils';\nimport utils from './utils';\nimport cacheUtils from './cacheUtils';\nimport pageUrl from 'api';\nimport CONSTS from './consts';\nimport { delAllFile } from './image-utils';\n\n\r\n/**\n * 打开新窗口\n * @param {string} url 要打开的页面地址\n * @param {string} id 指定页面ID\n * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{},isValidLogin,isClose}\n * 通过isValidLogin来确定是否做登录验证，true|false，默认false\n * 通过isClose来确定是否需要关闭当前webview，默认false\n * 默认是从右边划出，动画时间是500ms\n * @public\n */\nconst openWindow = (url, id, options) => {\n    if (unsafeTap()) {\n        return false;\n    }\n  // 判断网络情况，无网直接跳网络异常页面\n  //  if (getNetworkType() === 1) {\n  //      forwordError();\n  //      return false;\n  //  }\n    id = id || url;\n    options = options || {};\n\n    if (typeof id === 'object') {\n        options = id;\n        id = url;\n    }\n  // 处理默认值\n    options = merge({\n        styles: {\r\n            popGesture: 'close',\r\n            softinputMode: 'adjustResize'\r\n        },\n        show: {\n            autoShow: true,\n            aniShow: 'pop-in',\n            duration: 300\n        },\n        waiting: {\n            autoShow: false // 自动显示等待框，默认为true\n        },\n        createNew: false\n    }, options || {});\n\n    let blacklist = propUtils.getProperty('webview.id.blacklist', 'urlprops');\n    if (!blacklist.some(item => item === id)) {\n        cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).setObject(CONSTS.LOGIN_FORWORD, {\r\n            url: url,\n            id: id,\n            options: options || {}\n        });\n        logger.log('缓存的url:' + url);\n    }\n\n  // 是否需要验证登录\n    if (options.isValidLogin === true) {\n        if (loginValid() === false) {\n            return false;\n        }\n    }\n    //强制将要离开的界面关闭键盘(ios7.0 bug)\n    hideKeyBord();\n    setStatusStyleForPageId(id);\r\n    let gotoPage = plus.webview.getWebviewById(id);\r\n    let pagelist = propUtils.getProperty('webview.preload.whiltlist', 'urlprops');\r\n    if (gotoPage && !options.createNew) {\r\n        if (pagelist.some(item => item === id)) {\r\n            mui.fire(gotoPage, CONSTS.WEBVIEW_SHOW_EVENT, options.extras);\r\n        }\r\n        gotoPage.hide(); // 只有先hide再show才能出动画\r\n        gotoPage.show(options.show.aniShow, options.show.duration);\r\n    } else {\r\n        gotoPage = mui.openWindow(url, id, options);\r\n        if (!pagelist.some(item => item === id)) {\r\n            controlOpenPage(id);\r\n        }\r\n    }\r\n  // 延迟一秒关闭当前webview\r\n    if (options.isClose === true) {\r\n        setTimeout(function() {\r\n      // 去掉关闭动画\r\n            closWebview();\r\n        }, 1100);\r\n    }\r\n    setTimeout(function() {\r\n        popGestureEvent(gotoPage);\r\n    }, 300);\r\n    return gotoPage;\n};\r\n\r\n/**\r\n * 根据内存状态设置状态栏样式，非主页页面使用\r\n */\r\nconst setStatusStyle = () => {\r\n    if (!plus) {\r\n        return;\r\n    }\r\n    if (window.localStorage.getItem('openwindow_seller_index') === '0') {\n        plus.navigator.setStatusBarBackground('#419fdc');\n    } else {\n        plus.navigator.setStatusBarBackground('#f04e30');\n    }\n    plus.navigator.setStatusBarStyle('UIStatusBarStyleBlackOpaque');\n};\r\n\r\n/**\r\n * 根据页面id设置状态栏样式，只有两个主页需要关注\r\n * @param {[type]} id [description]\r\n */\r\nconst setStatusStyleForPageId = id => {\r\n    if (!plus) {\r\n        return;\r\n    }\r\n    if (id === 'main') {\r\n    // plus.navigator.setStatusBarBackground('#f04e30');\r\n    // plus.navigator.setStatusBarStyle('UIStatusBarStyleBlackOpaque');\r\n        window.localStorage.setItem('openwindow_seller_index', '1');\r\n    } else if (id === 'seller_index') {\r\n    // plus.navigator.setStatusBarBackground('#419fdc');\r\n    // plus.navigator.setStatusBarStyle('UIStatusBarStyleBlackOpaque');\r\n        window.localStorage.setItem('openwindow_seller_index', '0');\r\n    }\r\n    setStatusStyle();\r\n};\r\n\n/**\r\n * 控制连续点击多次打开窗口\r\n * 目前的开窗口动画300，在这个时间内多次点击会打开多个webview，所以将时间设置成500，保证手速再快也只能响应一次\r\n * @type {[type]}\r\n */\r\nvar tapFirst = null;\nconst unsafeTap = () => {\n    if (!tapFirst) {\n        tapFirst = new Date().getTime();\n        setTimeout(function() {\n            tapFirst = null;\n        }, 500);\r\n    } else {\n        return true;\n    }\n};\n\r\n/**\r\n * 监听侧滑事件\r\n * @type {[type]}\r\n */\n/* eslint-disable no-unused-vars*/\nconst popGestureEvent = gotoPage => {\r\n    let sbb = null;\r\n    let sbs = null;\r\n    gotoPage.addEventListener('popGesture', function(e) {\r\n        sbb = sbb || plus.navigator.getStatusBarBackground();\r\n        sbs = sbs || plus.navigator.getStatusBarStyle();\r\n        if (e.type === 'end') {\r\n            if (e.result === false) {\r\n        // 侧滑取消，还原状态栏样式\r\n                plus.navigator.setStatusBarBackground(sbb);\r\n                plus.navigator.setStatusBarStyle(sbs);\r\n            }\r\n        }\r\n        if (e.type === 'move' && e.progress > 55) {\r\n            let id = plus.webview.currentWebview().id;\r\n            if (id === 'main') {\r\n                setStatusStyleForPageId('main');\r\n            }\r\n        }\r\n    }, false);\r\n};\r\n\r\n/**\r\n * 控制新开页面数量，最大开20个页面，不包括预加载的页面，超过20个就砍掉最开始的第一个\r\n * @param  {String} id 新开页面的id\r\n * @return {void}\r\n */\r\nconst controlOpenPage = id => {\r\n    let maxNum = propUtils.getProperty('open_page_num', 'UIprops');\r\n    let allView = plus.webview.all();\r\n    let pagelist = propUtils.getProperty('webview.preload.whiltlist', 'urlprops');\r\n    allView = allView.filter(item => !pagelist.some(id => id === item.id));\r\n    if (allView.length > maxNum) {\r\n        logger.log(maxNum + 'openPage is max:' + allView.length, 'controlOpenPage()');\r\n        setTimeout(function() {\r\n            allView.splice(0, 1).map(id => {\r\n                plus.webview.close(id, 'none');\r\n            });\r\n        }, 1000);\r\n    }\r\n};\r\n\r\n/**\r\n * 关闭新开的页面，除了预加载的页面\r\n * @return {[type]} [description]\r\n */\r\nconst closeAllOpenPage = () => {\r\n    let allView = plus.webview.all();\r\n    let pagelist = propUtils.getProperty('webview.preload.whiltlist', 'urlprops');\r\n    allView = allView.filter(item => !pagelist.some(id => id === item.id));\r\n    logger.log('closeAllOpenPage is max:' + allView.length, 'closeAllOpenPage()');\r\n    setTimeout(function() {\r\n        allView.map(id => {\r\n            plus.webview.close(id, 'none');\r\n        });\r\n    }, 1000);\r\n};\r\n\r\n/**\r\n * 登录跳转打开上一次打开的窗口，需要刷新webview\r\n * 默认是从右边划出，动画时间是500ms\r\n * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\r\n * @public\r\n */\r\nconst openPreWindow = (options) => {\r\n  // 缓存读取id。通过id来开页面，如果没有就跳首页\r\n    let o = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).getObject(CONSTS.LOGIN_FORWORD) || pageUrl.PAGE_URL.buyer_index;\r\n    options = options || {};\r\n  // 处理默认值\r\n    options = merge(o.options || {}, options || {});\r\n    options = merge({\r\n        styles: {\r\n            popGesture: 'close'\r\n        },\r\n        show: {\r\n            autoShow: true,\r\n            aniShow: 'pop-in',\r\n            duration: 300\r\n        },\r\n        waiting: {\r\n            autoShow: false // 自动显示等待框，默认为true\r\n        }\r\n    }, options || {});\r\n  //  options.createNew = true;//重复新开一个webview，解决刷新数据刷新问题\r\n    let login = true;\n    let gotoPage = plus.webview.getWebviewById(o.id);\r\n    if (o.id === pageUrl.PAGE_URL.buyer_index.id) {\r\n        let accessToken = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.LOGIN_ACCESS_TOKEN);\r\n        if (accessToken === undefined || accessToken == null || accessToken === '' || accessToken === 'null') {\r\n            login = false;\r\n        }\n        if (options.openIndex !== undefined) {\n            mui.fire(gotoPage, 'home_nav', {\n                index: options.openIndex\n            });\n        }\n        setTimeout(() => {\n            gotoPage.hide();\n            gotoPage.show(options.show.aniShow, options.show.duration);\n        }, 300);\r\n        if (login === false) {\r\n            mui.fire(plus.webview.getWebviewById(o.id), CONSTS.LOGIN_OUT_EVENT, {});\r\n            return;\r\n        }\n        mui.fire(gotoPage, CONSTS.LOGIN_COMPUTER_EVENT, {});\n        setTimeout(function() {\n            closWebview();\n        }, 1000);\n    } else if (gotoPage) {\n    // 纯按钮操作，不涉及页面, 必须将去向页面show处理，中间有几个页面，仅仅关闭当前页面是不够的\r\n        mui.fire(gotoPage, CONSTS.LOGIN_COMPUTER_EVENT, {});\r\n        setTimeout(() => {\r\n            gotoPage.hide();\n            gotoPage.show(options.show.aniShow, options.show.duration);\r\n        }, 300);\r\n        setTimeout(() => {\r\n            plus.webview.currentWebview().close('none');\r\n        }, 1000);\r\n    } else {\n    // 跳转到目标页面\n        mui.openWindow(o.url, o.id, options);\n        setTimeout(function() {\n            plus.webview.currentWebview().close('none');\n        }, 500);\n    }\n};\r\n\r\n/**\r\n * 打开首页\r\n * @param {string} type 打开的首页类型\r\n * buyer(买家首页) seller(卖家首页)\r\n * @public\r\n */\r\nconst openIndexWindow = (type, options) => {\r\n    options = options || {};\r\n    let openIndex = options.openIndex || 0;\r\n    mui.fire(plus.webview.getWebviewById(pageUrl.PAGE_URL.buyer_index.id), 'home_nav', {\r\n        index: openIndex\r\n    });\r\n    let id = pageUrl.PAGE_URL.buyer_index.id;\r\n    let url = pageUrl.PAGE_URL.buyer_index.url;\r\n    if (type === 'seller') {\r\n        id = pageUrl.PAGE_URL.seller_index.id;\r\n        url = pageUrl.PAGE_URL.seller_index.url;\r\n    }\r\n  // openWindow(url, id);\r\n    setTimeout(function() {\r\n        openWindow(url, id, options);\r\n    }, 300);\r\n};\r\n\r\nconst closWebview = () => {\r\n    if (plus.webview.currentWebview().id !== 'main') {\r\n        plus.webview.currentWebview().close('none');\r\n    }\r\n};\r\n\r\n/**\r\n * 手机网络状态\r\n * CONNECTION_UNKNOW: 网络连接状态未知  0\r\n * CONNECTION_NONE: 未连接网络 1\r\n * CONNECTION_ETHERNET: 有线网络 2\r\n * CONNECTION_WIFI: 无线WIFI网络 3\r\n * CONNECTION_CELL2G: 蜂窝移动2G网络 4\r\n * CONNECTION_CELL3G: 蜂窝移动3G网络 5\r\n * CONNECTION_CELL4G: 蜂窝移动4G网络 6\r\n * @return { Number} 连接状态数值\r\n * @public\r\n */\r\nconst getNetworkType = () => {\r\n    let types = {};\r\n    types[plus.networkinfo.CONNECTION_UNKNOW] = 'Unknown connection';\r\n    types[plus.networkinfo.CONNECTION_NONE] = 'None connection';\r\n    types[plus.networkinfo.CONNECTION_ETHERNET] = 'Ethernet connection';\r\n    types[plus.networkinfo.CONNECTION_WIFI] = 'WiFi connection';\r\n    types[plus.networkinfo.CONNECTION_CELL2G] = 'Cellular 2G connection';\r\n    types[plus.networkinfo.CONNECTION_CELL3G] = 'Cellular 3G connection';\r\n    types[plus.networkinfo.CONNECTION_CELL4G] = 'Cellular 4G connection';\r\n    logger.log('networkinfo:' + plus.networkinfo.getCurrentType(), 'getNetworkType()');\r\n    return plus.networkinfo.getCurrentType();\r\n};\r\n\r\n/**\r\n * 手机网络状态\r\n * CONNECTION_UNKNOW: 网络连接状态未知  0\r\n * CONNECTION_NONE: 未连接网络 1\r\n * CONNECTION_ETHERNET: 有线网络 2\r\n * CONNECTION_WIFI: 无线WIFI网络 3\r\n * CONNECTION_CELL2G: 蜂窝移动2G网络 4\r\n * CONNECTION_CELL3G: 蜂窝移动3G网络 5\r\n * CONNECTION_CELL4G: 蜂窝移动4G网络 6\r\n * @return { Number} 连接状态数值\r\n * @public\r\n */\r\nconst getNetworkTypeZH = () => {\r\n    let types = {};\r\n    types[plus.networkinfo.CONNECTION_UNKNOW] = '网络连接状态未知';\r\n    types[plus.networkinfo.CONNECTION_NONE] = '未连接网络';\r\n    types[plus.networkinfo.CONNECTION_ETHERNET] = '有线网络';\r\n    types[plus.networkinfo.CONNECTION_WIFI] = 'WiFi网络';\r\n    types[plus.networkinfo.CONNECTION_CELL2G] = '2G网络';\r\n    types[plus.networkinfo.CONNECTION_CELL3G] = '3G网络';\r\n    types[plus.networkinfo.CONNECTION_CELL4G] = '4G网络';\r\n\r\n    return types[plus.networkinfo.getCurrentType()];\r\n};\r\n\r\n/**\r\n * ajax方法的封装\r\n * @param {object} options 配置的参数\r\n * @public\r\n */\r\nconst forwordError = (options) => {\r\n    options = options || {};\r\n    let url = pageUrl.PAGE_URL.error_connect.url;\r\n    let id = pageUrl.PAGE_URL.error_connect.id;\r\n    logger.log(id + 'forwordError:' + url, 'forwordError()');\r\n    mui.openWindow(url, id, {});\r\n};\r\n\r\n/**\n * ajax方法的封装,增加一个参数，如果不需要进行加载动画时，需要显示设置为false\n * options.loading = false;默认值是true\n * @param {string} url 要打开的页面地址\n * @param {string} options 配置的参数，具体的参数配置同mui的ajax参数\n * @public\n */\nconst muiAjax = (url, options) => {\n    if (options.loading === undefined) {\n        options.loading = true;\n    }\n    logger.log('url:' + url + ' options:' + utils.stringify(options));\n  //  mui.ajaxSettings.beforeSend = ajaxBeforeSend;\n    mui.ajaxSettings.inspect = ajaxInspect;\n    mui.ajaxSettings.success = ajaxSuccess;\n    mui.ajaxSettings.error = ajaxError;\n    mui.ajaxSettings.complete = ajaxComplete;\n  /**\n   * ajax超时时间设置为10秒\n   */\n    mui.ajaxSettings.timeout = 10000;\n    if (ajaxBeforeSend(options, url) === false) {\n        logger.log('ajaxBeforeSend has return false', 'muiAjax ajaxBeforeSend');\n    //      options.error();\n        return false;\n    }\r\n    mui.ajax(url, options);\n};\n\n/**\n * 带回调函数的登录验证方法\n * @param  {Function} cb 回调函数，登录成功之后调用，用来处理登录之后的后续逻辑\n * @param  {Object} opt   回调参数\n * @return {void}           无返回\n */\nconst loginValid = (cb, opt) => {\n    let accessToken = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.LOGIN_ACCESS_TOKEN);\n    if (accessToken === undefined || accessToken == null || accessToken === '' || accessToken === 'null') {\n    // 未登录，打开登录页面\n        let ops = {\n            styles: {\n                popGesture: 'close',\n                softinputMode: 'adjustResize'\n            },\n            show: {\n                autoShow: true,\n                aniShow: 'pop-in',\n                duration: 300\n            },\n            waiting: {\n                autoShow: false // 自动显示等待框，默认为true\n            },\n            createNew: false\n        };\n        if (cb !== undefined && typeof cb === 'function') {\n      // 开启监听，等待登录完成\n            window.addEventListener(CONSTS.LOGIN_COMPUTER_EVENT, e => {\n                logger.log(CONSTS.LOGIN_COMPUTER_EVENT, 'loginValidHasCb');\n        // 确保callback是一个函数\n                if (typeof cb === 'function') {\n                    cb(opt);\n                } else {\n                    logger.log('cbSuccess must be function!');\n                }\n            });\n        }\n        mui.openWindow(pageUrl.PAGE_URL.login_index.url, pageUrl.PAGE_URL.login_index.id, ops);\r\n        return false;\n    } else {\n        if (cb !== undefined && typeof cb === 'function') {\n            cb(opt);\n        }\n        return true;\n    }\n};\n\n/**\n * 开始,return false 就会终止ajax请求\n * 1.判断网络状态\n * 2.set头部信息\n * @param {XMLHttpRequest} xhr XMLHttpRequest对象\n * @param {Object} setting 参数\n * @private\n */\nconst ajaxBeforeSend = (options, url) => {\n  //  logger.log('ajaxBeforeSend', 'muiUtils.js');\n  //  if (getNetworkType() === 1) {\n  //      forwordError();\n  //      return false;\n  //  }\n  // 设置头部认证信息\n    options.headers = options.headers || {};\n    let token = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.LOGIN_ACCESS_TOKEN);\n    let instanceId = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.APP_INSTANCE_ID);\n    if (instanceId === undefined || instanceId == null || instanceId === '' || instanceId === 'null') {\n        instanceId = utils.uuidV4();\n        cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).set(CONSTS.APP_INSTANCE_ID, instanceId);\n    }\n\n    options.headers.instance_id = instanceId;\n    options.headers.access_token = (token === 'null' || token == null) ? '' : token;\n    options.headers.reqStartTime = new Date().getTime(); // 请求开始时间\n    options.headers.url = url; // 打印而已\n  // 开启加载动画\n    if (options.loading === true) {\n        let w = plus.nativeUI.showWaiting('处理中...');\n        options.nativeUI = w;\n    }\n};\n\n/**\n * 拦截器，拦截ajax回调，处理权限等\n * @param {Object} data api给的结果\n * @param {String} xhr  XMLHttpRequest对象\n * @param {XMLHttpRequest} setting  传入的参数对象\n * @private\n */\nconst ajaxInspect = (data, xhr, setting) => {\r\n  //  logger.log(JSON.stringify(setting.inspecterror) + 'require data before deal:' + JSON.stringify(data), 'inspecttype' + setting.inspecttype);\r\n  // 关闭加载动画\r\n    if (setting.nativeUI !== undefined) {\n        setting.nativeUI.close();\n    }\n    let reqTime = new Date().getTime() - setting.headers.reqStartTime;\n    logger.log('url:' + setting.url);\n    logger.log('ajaxInspect reqTime:' + reqTime, 'ajaxInspect()');\r\n    if (data === 'error') { // 异常处理\n        logger.log('errorType:' + setting.inspecttype, 'error');\r\n        logger.log('error:' + setting.inspecterror, 'error');\r\n    } else { // 正常处理\r\n    // 将API返回的data数据处理成统一格式\r\n        let tempData = data.result_data || {};\r\n        data.header = {\r\n            code: data.error_code + '',\r\n            msg: data.error_message\r\n        };\r\n        Object.keys(tempData).map(item => {\r\n            data[item] = tempData[item];\r\n        });\r\n        delete data.error_code;\r\n        delete data.error_message;\r\n        delete data.error_data;\r\n        delete data.result_data;\r\n        logger.log('require data after deal:' + JSON.stringify(data));\r\n    // 当在函数体内使用赋值操作时，系统就创建了一个变量名为data的变量。这个data是函数内部的变量，对它进行赋值当然只在函数体内起作用，外面的data还是原来的data,对对象进行修改就会反映到外部data上，因为对象和数组都是传递的引用\r\n    // data = tempData;\r\n        if (data.header !== undefined && data.header.code === CONSTS.ERROR_CODE.INSUFFICIENT_PERMISSIONS) {\n            logger.log('权限不足', 'ajaxInspect');\n            if (loginValid() === false) {\n                setting.error();\n                return false;\n            }\n        }\n        let instanceId = xhr.getResponseHeader(CONSTS.APP_INSTANCE_ID);\n        if (instanceId === cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.APP_INSTANCE_ID)) {\n            logger.log(\"it's my require!!!!\", 'valid instanceId is ok');\n        } else {\n            logger.log('it is not  my require!!!!,the token is no safe,please login again and change password,' + instanceId, 'valid instanceId is nok');\n    // 测试阶段，直接忽略，上线了可以开启\n    // return false;\n        }\n    // 更新token\n        let token = xhr.getResponseHeader(CONSTS.LOGIN_ACCESS_TOKEN) || cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.LOGIN_ACCESS_TOKEN);\n    // logger.log(token, 'CONSTS.LOGIN_ACCESS_TOKEN ajaxInspect');\n        cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).set(CONSTS.LOGIN_ACCESS_TOKEN, token);\n    }\n  // 返回true就是放过，false就拦截后面的请求，目前拦截了error和sucess\n    return true;\n};\n\n/**\n * 成功\n * @param {Object} data api给的结果\n * @param {String} xhr  XMLHttpRequest对象\n * @param {XMLHttpRequest} setting  传入的参数对象\n * @private\n */\nconst ajaxSuccess = (data, xhr, setting) => {\n    logger.log('ajaxSuccess' + data, 'muiUtils.js');\n};\n\n/**\n * 出错\n * @private\n */\nconst ajaxError = (error, type, xhr, setting) => {\n    logger.log('ajaxError' + error + type, 'muiUtils.js');\n};\n\n/**\n * 结束\n * @private\n */\nconst ajaxComplete = (status, xhr, setting) => {\n    let reqTime = new Date().getTime() - setting.headers.reqStartTime;\n  //  logger.log('ajaxComplete reqStartTime:' + setting.headers.reqStartTime + 'reqEndTime:' + new Date().getTime(), 'ajaxComplete()');\n    logger.log('ajaxComplete reqTime:' + reqTime, 'ajaxComplete()');\n//  logger.log('ajaxComplete', 'ajaxComplete()');\n};\n\n/**\n * 获取登录用户信息\n * @public\n * return 用户登录返回用户对象，用户未登录返回null\n */\nconst getLoginUserInfo = () => {\n    let accessToken = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).get(CONSTS.LOGIN_ACCESS_TOKEN);\n    if (accessToken === 'undefined' || accessToken == null || accessToken === '' || accessToken === 'null') {\n        return {};\n    } else {\n        let localStorage = cacheUtils.localStorage(CONSTS.PREFIX_LOGIN);\n        let userInfo = localStorage.getObject(CONSTS.USER_INFO);\n        return userInfo;\n    }\n};\n\n/**\n * 清空缓存，包括图片\n * @param {Boolean} onlyMemory true 仅仅清理内存数据，否则一并清理图片\n * @public\n */\nconst clearMemory = (onlyMemory) => {\n    let instanceId = window.localStorage.getItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.APP_INSTANCE_ID);\n    let accessToken = window.localStorage.getItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.LOGIN_ACCESS_TOKEN);\n    let userInfo = window.localStorage.getItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.USER_INFO);\n    window.localStorage.clear();\n    cacheUtils.cookie.clear();\n    window.sessionStorage.clear();\n    if (onlyMemory !== true) {\n        delAllFile();\n    }\n    cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).set(CONSTS.APP_INSTANCE_ID, instanceId === undefined ? '' : instanceId);\n    cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).set(CONSTS.LOGIN_ACCESS_TOKEN, accessToken === undefined ? '' : accessToken);\n    cacheUtils.localStorage(CONSTS.PREFIX_LOGIN).set(CONSTS.USER_INFO, userInfo === undefined ? '' : userInfo);\n//  window.localStorage.setItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.APP_INSTANCE_ID, instanceId === undefined ? '' : instanceId);\n//  window.localStorage.setItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.LOGIN_ACCESS_TOKEN, accessToken === undefined ? '' : accessToken);\n};\n\n/**\n * 输入框获取焦点被底部fix定位所遮盖,光标丢失,处于输入状态时跳转新的webview。\n * 输入键盘不消失,点击键盘中的完成时,键盘消失,但界面出现白屏。注意（此处没有加入横竖屏判断,只适用于手机竖屏）\n * @private\n */\nconst hideKeyBord = (url) => {\n    if(document.documentElement.clientHeight < plus.webview.currentWebview().pageOldH){\n    \tvar nativeWebview = plus.webview.currentWebview().nativeInstanceObject();\n    \tif (mui.os.android) {//安卓暂时没有发现此问题如果有请把它放开\n//          var main = plus.android.runtimeMainActivity();\n//          var Context = plus.android.importClass('android.content.Context');\n//          var InputMethodManager = plus.android.importClass('android.view.inputmethod.InputMethodManager');\n//          var imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);\n//          plus.android.importClass(nativeWebview);\n//          nativeWebview.requestFocus();\n//          imm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n        } \n        if(mui.os.ios){\n        \tvar tagName = document.activeElement.tagName.toLowerCase();\n\t\t\tif(tagName=='input'||tagName=='textarea'){\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t\treturn;\n\t\t\t}\n    \t\tnativeWebview.plusCallMethod({\n                'setKeyboardDisplayRequiresUserAction': false\n            });\n            var input = document.createElement('input');\n\t    \tdocument.body.appendChild(input);\n\t        input.focus();\n\t\t\tinput.blur();\n\t\t\tdocument.body.removeChild(input);\n\t\t\tinput=null;\n        }\n    }\n};\n\nexport default {\n    openWindow,\n    openPreWindow,\n    openIndexWindow,\n    getNetworkType,\n    getNetworkTypeZH,\n    forwordError,\n    muiAjax,\n    loginValid,\n    getLoginUserInfo,\n    clearMemory,\n    closeAllOpenPage,\n    setStatusStyle,\r\n    setStatusStyleForPageId\n};\n"]}