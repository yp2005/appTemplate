{"version":3,"sources":["src\\common\\_help\\_home\\_homeUtils.js"],"names":[],"mappings":"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","file":"_homeUtils.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/jxddH5PlusApp/unpackage","sourcesContent":["/*eslint-disable no-unused-vars */\r\nimport pullToRefresh from 'static/js/mui.pullToRefresh';\r\nimport { HOME_INDEX, IMCHAT_SWITCH } from 'common/consts';\r\nimport cacheUtils from 'common/cacheUtils';\r\n// import pullToRefreshMaterial from 'static/js/mui.pullToRefresh.material.js';\r\nconst scroll = (self) => {\r\n    mui('#homepage').scroll({\r\n        bounce: true,\r\n        indicators: false, // 是否显示滚动条\r\n        deceleration: mui.os.ios ? 0.003 : 0.0009\r\n    });\r\n    mui('#mui-scroll-activity').scroll({\r\n        bounce: true,\r\n        indicators: false, // 是否显示滚动条\r\n        deceleration: mui.os.ios ? 0.003 : 0.0009\r\n    });\r\n    self.pullrefresh = mui('#homeScroll').pullToRefresh({\r\n        down: {\r\n      // auto: true,\r\n            offset: 50,\r\n            height: 70,\r\n            callback: function() {\r\n                self.getHomePageData();\r\n            }\r\n        },\r\n        up: {\r\n            offset: 50,\r\n            callback: function() {\r\n                self.loadGuess();\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nconst preload = () => {\r\n    mui.preload({\r\n        url: '../../commonpage/buyinghall/index.html',\r\n        id: 'buyer_commonpage_buyinghall_index.html',\r\n        styles: {\r\n            popGesture: 'close'\r\n        },\r\n        show: {\r\n            autoShow: true,\r\n            aniShow: 'pop-in',\r\n            duration: 300\r\n        },\r\n        waiting: {\r\n            autoShow: false // 自动显示等待框，默认为true\r\n        }\r\n    });\r\n    mui.preload({\r\n        url: '../../buyer/supplier/index.html',\r\n        id: 'buyer_supplier_index.html',\r\n        styles: {\r\n            popGesture: 'close'\r\n        },\r\n        show: {\r\n            autoShow: true,\r\n            aniShow: 'pop-in',\r\n            duration: 300\r\n        },\r\n        waiting: {\r\n            autoShow: false // 自动显示等待框，默认为true\r\n        }\r\n    });\r\n    if (IMCHAT_SWITCH) {\r\n        mui.preload({\r\n            url: '../../seller/imchat/index.html',\r\n            id: 'seller_imchat',\r\n            styles: {\r\n                popGesture: 'close'\r\n            },\r\n            show: {\r\n                autoShow: true,\r\n                aniShow: 'pop-in',\r\n                duration: 300\r\n            },\r\n            waiting: {\r\n                autoShow: false // 自动显示等待框，默认为true\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n/**\r\n * 从本地缓存里读取图片绝对路径\r\n * @type {String} url 图片路径,完整的url\r\n * @return {String} 存在就返回本来图片路径,不存在就返回undefined\r\n */\r\nconst getLocalPath4Img = (url, dataName) => {\r\n    if (!isImageUrl(url)) {\r\n        return undefined;\r\n    }\r\n    let data = cacheUtils.localStorage(HOME_INDEX).getObject(dataName) || [];\r\n    return (data.filter(item => (item[getItemImgUrl(dataName)] || '').split('/').pop() === dataName + '_' + url.split('/').pop())[0] || {})[getItemImgUrl(dataName)];\r\n};\r\n\r\n/**\r\n * 比较对象内容是否一致\r\n * @param  {[type]} localItem [description]\r\n * @param  {[type]} netItem   [description]\r\n * @param  {[type]} dataName  [description]\r\n * @return {[type]}           [description]\r\n */\r\nconst itemEq = (localItem, netItem, dataName) => {\r\n    if (localItem === undefined) {\r\n        return false;\r\n    }\r\n    let result = true;\r\n    let l = JSON.parse(localItem);\r\n    if (typeof l !== 'object') {\r\n        return false;\r\n    }\r\n    let n = JSON.parse(netItem);\r\n    let item = (l[getItemImgUrl(dataName)] || '').split('/').pop() || '';\r\n    if (!(l[getItemImgUrl(dataName)] || '')) {\r\n        return false;\r\n    }\r\n  // console.log(localItem + ' netItemnetItemnetItemnetItemnetItem:' + netItem);\r\n  // 先看图片是否一致\r\n    if (item.replace('_' + item.split('_').pop(), '') === dataName + '_' + (n[getItemImgUrl(dataName)] || '').split('/').pop()) {\r\n        delete l[getItemImgUrl(dataName)];\r\n        delete n[getItemImgUrl(dataName)];\r\n    // 剔除图片之后，再进行内容比较，完全一致的，就返回true，否则返回false\r\n        Object.keys(l).map(k => {\r\n      // console.log(l[k] + 'okok:' + n[k]);\r\n            if (l[k] !== n[k]) {\r\n                result = false;\r\n            }\r\n        });\r\n    } else {\r\n        result = false;\r\n    }\r\n  // console.log('result:' + result);\r\n    return result;\r\n};\r\n\r\n/**\r\n * 验证图片路径是否有效，为减少请求次数，提前进行判断\r\n * @type {Boolean} true 有效图片路径，false无效的图片路径\r\n */\r\nconst isImageUrl = imgUrl => {\r\n    let reg = /\\.(png|jpe?g|gif|svg)(\\?.*)?$/;\r\n    return !(imgUrl === undefined || imgUrl == null || imgUrl.indexOf('/') === -1 || !reg.test(imgUrl));\r\n};\r\n\r\nconst getItemImgUrl = dataName => {\r\n    let itemImgUrl = 'image_url';\r\n    switch (dataName) {\r\n    case 'activityDatas':\r\n        itemImgUrl = 'column_img_url';\r\n        break;\r\n    case 'imageDatas':\r\n        itemImgUrl = 'banner_img_url';\r\n        break;\r\n    case 'customizationDatas':\r\n        itemImgUrl = 'gc_id_1_url';\r\n        break;\r\n    case 'brandsDatas':\r\n        itemImgUrl = 'brand_url';\r\n        break;\r\n    case 'guessDatas':\r\n        itemImgUrl = 'image_url';\r\n        break;\r\n    default:\r\n        itemImgUrl = 'image_url';\r\n    }\r\n    return itemImgUrl;\r\n};\r\n\r\nexport default {\r\n    scroll,\r\n    preload,\r\n    getLocalPath4Img,\r\n    getItemImgUrl,\r\n    isImageUrl,\r\n    itemEq\n};\r\n"]}