{"version":3,"sources":["src\\common\\_help\\_goodslist\\_goodsUtils.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAUA,IAAM,6ZAAN;;AAiBA,IAAM,KAAK,CAAC;AACR,OAAG,UADK;AAER,OAAG;AAFK,CAAD,EAGR;AACC,OAAG,UADJ;AAEC,OAAG;AAFJ,CAHQ,EAMR;AACC,OAAG,WADJ;AAEC,OAAG;AAFJ,CANQ,EASR;AACC,OAAG,WADJ;AAEC,OAAG;AAFJ,CATQ,EAYR;AACC,OAAG,YADJ;AAEC,OAAG;AAFJ,CAZQ,EAeR;AACC,OAAG,aADJ;AAEC,OAAG;AAFJ,CAfQ,EAkBR;AACC,OAAG,aADJ;AAEC,OAAG;AAFJ,CAlBQ,EAqBR;AACC,OAAG,aADJ;AAEC,OAAG;AAFJ,CArBQ,EAwBR;AACC,OAAG,YADJ;AAEC,OAAG;AAFJ,CAxBQ,EA2BR;AACC,OAAG,cADJ;AAEC,OAAG;AAFJ,CA3BQ,EA8BR;AACC,OAAG,iBADJ;AAEC,OAAG;AAFJ,CA9BQ,EAiCR;AACC,OAAG,SADJ;AAEC,OAAG;AAFJ,CAjCQ,CAAX;;AA2CA,IAAM,KAAK,CAAC;AACR,OAAG,OADK;AAER,OAAG;AAFK,CAAD,EAGR;AACC,OAAG,QADJ;AAEC,OAAG;AAFJ,CAHQ,EAMR;AACC,OAAG,SADJ;AAEC,OAAG;AAFJ,CANQ,EASR;AACC,OAAG,WADJ;AAEC,OAAG;AAFJ,CATQ,EAYR;AACC,OAAG,WADJ;AAEC,OAAG;AAFJ,CAZQ,EAeR;AACC,OAAG,UADJ;AAEC,OAAG;AAFJ,CAfQ,EAkBR;AACC,OAAG,QADJ;AAEC,OAAG;AAFJ,CAlBQ,EAqBR;AACC,OAAG,SADJ;AAEC,OAAG;AAFJ,CArBQ,EAwBR;AACC,OAAG,YADJ;AAEC,OAAG;AAFJ,CAxBQ,EA2BR;AACC,OAAG,aADJ;AAEC,OAAG;AAFJ,CA3BQ,CAAX;;AAsCA,IAAM,YAAY,mBAAC,IAAD,EAAO,KAAP,EAAiB;AAC/B,QAAI,YAAY,EAAhB;AACA,SAAK,GAAL,CAAS,UAAC,IAAD,EAAO,KAAP,EAAiB;AACtB,qBAAa,WAAW,OAAX,CAAmB,WAAnB,EAAgC,IAAhC,EAAsC,OAAtC,CAA8C,aAA9C,EAA6D,QAAQ,KAArE,CAAb;AACH,KAFD;AAGA,WAAO,SAAP;AACH,CAND;;AAaA,IAAM,cAAc,SAAd,WAAc,IAAK;AACrB,QAAI,eAAe,CAAnB;AACA,YAAQ,CAAR;AACA,aAAK,eAAL;AACI,2BAAe,CAAf;AACA;AACJ,aAAK,aAAL;AACI,2BAAe,CAAf;AACA;AACJ;AACI;AARJ;AAUA,WAAO,YAAP;AACH,CAbD;;AAoBA,IAAM,qBAAqB,SAArB,kBAAqB,OAAQ;AAC/B,QAAI,UAAU,EAAd;AACA,SAAK,OAAL,GAAe,GAAf,CAAmB,UAAC,IAAD,EAAO,KAAP,EAAiB;AAChC,YAAI,OAAO,EAAX;AACA,aAAK,IAAL,CAAU,WAAW,KAAK,KAAhB,CAAV;AACA,aAAK,IAAL,CAAU,UAAU,CAAV,GAAc,CAAd,GAAkB,WAAY,KAAM,UAAU,CAAX,GAAgB,CAAhB,GAAoB,QAAQ,CAAjC,CAAD,CAAsC,KAAjD,IAA0D,CAAtF;AACA,aAAK,IAAL,CAAU,WAAW,KAAK,KAAhB,CAAV;AACA,gBAAQ,IAAR,CAAa,IAAb;AACH,KAND;AAOA,WAAO,yBAAe,QAAQ,OAAR,EAAf,CAAP;AACH,CAVD;;AAgBA,IAAM,SAAS,SAAT,MAAS,OAAQ;AACnB,QAAI,MAAM,WAAV;AADmB;AAAA;AAAA;;AAAA;AAEnB,wDAAiB,EAAjB,4GAAqB;AAAA,gBAAZ,IAAY;;AACjB,gBAAI,CAAC,KAAK,KAAK,CAAV,KAAgB,EAAjB,EAAqB,KAArB,KAA+B,KAAnC,EAA0C;AACtC,sBAAM,OAAO,KAAK,CAAZ,EAAe,KAAK,KAAK,CAAV,CAAf,CAAN;AACA;AACH;AACJ;AAPkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQnB,WAAO,GAAP;AACH,CATD;;AAiBA,IAAM,SAAS,SAAT,MAAS,CAAC,KAAD,EAAQ,IAAR,EAAiB;AAC5B,WAAO,QAAQ,CAAC,GAAG,MAAH,CAAU;AAAA,eAAK,KAAK,EAAE,CAAP,CAAL;AAAA,KAAV,EAA0B,CAA1B,KAAgC;AAC5C,WAAG;AADyC,KAAjC,EAEZ,CAFH;AAGH,CAJD;;kBAMe;AACX,wBADW;AAEX,4BAFW;AAGX,0CAHW;AAIX;AAJW,C","file":"_goodsUtils.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/jxddH5PlusApp/unpackage","sourcesContent":["/*!\n * 商品快速发布模块的工具方法，不是公用的\n * @auther lxm\n * @date 2016.7.16\n */\n\n/**\n * [_goodsBody html片段]\n * @type {[type]}\n */\nconst _goodsBody = `\n    <div class=\"product-detail-content\">\n        <ul class=\"mui-table-view mui-grid-view\">\n            <li class=\"mui-table-view-cell mui-media mui-col-xs-12\">\n                <a href=\"#\">\n                    <img class=\"mui-media-object\" src=\"image.url\">\n                    <div class=\"mui-media-body\">image.title</div>\n                </a>\n            </li>\n        </ul>\n    </div>\n`;\r\n\n/**\n * [ks 验证器标题]\n * @type {Array}\n */\nconst ks = [{\r\n    k: 'zhutuLen',\n    v: '商品主图'\r\n}, {\r\n    k: 'category',\r\n    v: '商品分类'\r\n}, {\r\n    k: 'goodsName',\r\n    v: '商品名称'\r\n}, {\r\n    k: 'goodsUnit',\r\n    v: '计量单位'\r\n}, {\r\n    k: 'goodsStock',\r\n    v: '商品库存'\r\n}, {\r\n    k: 'item[start]',\r\n    v: '起批量'\r\n}, {\r\n    k: 'item[price]',\r\n    v: '价格'\r\n}, {\r\n    k: 'explanation',\r\n    v: '产品简介'\r\n}, {\r\n    k: 'chanpinLen',\n    v: '产品信息图'\r\n}, {\r\n    k: 'baozhuangLen',\n    v: '产品包装图'\r\n}, {\r\n    k: 'shiptemplatesel',\r\n    v: '运费模板'\r\n}, {\r\n    k: 'shipnum',\r\n    v: '固定运费'\r\n}\r\n];\r\n\n/**\n * [vs 验证器提示信息]\n * @type {Array}\n */\nconst vs = [{\r\n    k: 'empty',\r\n    v: '不能为空!'\r\n}, {\r\n    k: 'number',\r\n    v: '必须是大于0的数字!'\r\n}, {\r\n    k: 'qipival',\r\n    v: '需要大于上一档!'\r\n}, {\r\n    k: 'minlength',\r\n    v: '最少3个字符!'\r\n}, {\r\n    k: 'maxlength',\r\n    v: '字符长度超限!'\r\n}, {\r\n    k: 'radioval',\r\n    v: '配置不正确!'\r\n}, {\r\n    k: 'picLen',\r\n    v: '至少一张!'\r\n}, {\n    k: 'numberZ',\n    v: '最多8位整数!'\n}, {\n    k: 'zhennumval',\n    v: '只能输入中英文字符!'\n}, {\n    k: 'zhennumval1',\n    v: '只能输入中英文字符!'\n}];\n\n/**\n * 生成商品详情页的html代码\n * @param  {Array} data  详情页的列表数据\n * @param  {String} title 标题\n * @return {String}       html片段\n */\nconst goodsBody = (data, title) => {\r\n    let goodsBody = '';\r\n    data.map((item, index) => {\r\n        goodsBody += _goodsBody.replace('image.url', item).replace('image.title', title + index);\r\n    });\r\n    return goodsBody;\r\n};\r\n\n/**\n * 运费类型转换成数字\n * @type {String} v\n * @return {Number}\n */\nconst getShipType = v => {\r\n    let shippingType = 2;\r\n    switch (v) {\r\n    case 'ship_template':\r\n        shippingType = 1;\r\n        break;\r\n    case 'ship_seller':\r\n        shippingType = 3;\r\n        break;\r\n    default:\r\n        ;\r\n    }\r\n    return shippingType;\r\n};\r\n\r\n/**\r\n * 将阶梯价格数组进行格式化\r\n * eg：'[[10,19,100],[20,0,90]]'\r\n * @type {String}\r\n */\r\nconst getGoodsMpriceJson = data => {\r\n    let jsonStr = [];\r\n    data.reverse().map((item, index) => {\r\n        let temp = [];\r\n        temp.push(parseFloat(item.start));\n        temp.push(index === 0 ? 0 : parseFloat((data[(index === 0) ? 0 : index - 1]).start) - 1);\n        temp.push(parseFloat(item.price));\n        jsonStr.push(temp);\r\n    });\r\n    return JSON.stringify(jsonStr.reverse());\r\n};\n\r\n/**\r\n * 根据验证结果集，解析验证异常信息，只取第一条验证失败数据进行处理\r\n * @type {String} msg\r\n */\r\nconst errMsg = data => {\n    let msg = '阶梯价设置不正确!';\n    for (let item of ks) {\r\n        if ((data[item.k] || {}).valid === false) {\r\n            msg = getMsg(item.v, data[item.k]);\r\n            break;\r\n        }\r\n    }\r\n    return msg;\n};\n\n/**\r\n * 解析验证异常提示信息\r\n * @param  {String} title 验证表单名称\r\n * @param  {Object} item  验证结果\r\n * @return {String}       msg\r\n */\r\nconst getMsg = (title, item) => {\r\n    return title + (vs.filter(i => item[i.k])[0] || {\r\n        v: ''\n    }).v;\n};\n\r\nexport default {\r\n    goodsBody,\r\n    getShipType,\r\n    getGoodsMpriceJson,\n    errMsg\n};\r\n"]}