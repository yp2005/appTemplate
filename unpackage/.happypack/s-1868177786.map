{"version":3,"sources":["src\\static\\js\\mui.lazyload.img.js"],"names":["$","window","document","ImageLazyload","Lazyload","extend","init","element","options","_super","_init","selector","_set","uri","tagName","src","style","backgroundImage","_hasPlaceholder","offsetWidth","_addPlaceHolder","self","_counter","onload","addCallback","handle","onPlaceHolder","placeholder","addElement","getAttribute","_createLoader","callback","img","Image","onerror","set","trigger","removeAttribute","key","destroy","fn","imageLazyload","lazyloadApis","each","lazyloadApi","body","id","uuid","data","setAttribute","push","length","mui"],"mappings":"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","file":"mui.lazyload.img.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["(function($, window, document) {\n\tvar ImageLazyload = $.Lazyload.extend({\n\t\tinit: function(element, options) {\n\t\t\tthis._super(element, options);\n\t\t},\n\t\t_init: function() {\n\t\t\tthis.options.selector = '[data-lazyload]';\n\t\t\tthis._super();\n\t\t},\n\t\t_set: function(element, uri) {\n\t\t\tif (element.tagName === 'IMG') {\n\t\t\t\telement.src = uri;\n\t\t\t} else {\n\t\t\t\telement.style.backgroundImage = \"url(\" + uri + \")\";\n\t\t\t}\n\t\t},\n\t\t_hasPlaceholder: function(element) {\n\t\t\tif (element.offsetWidth) {\n\t\t\t\tif (element.tagName === 'IMG') {\n\t\t\t\t\treturn !!element.src;\n\t\t\t\t} else {\n\t\t\t\t\treturn !!element.style.backgroundImage;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\t_addPlaceHolder: function(element) {\n\t\t\tvar self = this;\n\t\t\tif (element.tagName === 'IMG') {\n\t\t\t\tself._counter++;\n\t\t\t\telement.onload = function() {\n\t\t\t\t\tself._counter--;\n\t\t\t\t\tself.addCallback(element, self.handle);\n\t\t\t\t\tthis.onload = null;\n\t\t\t\t};\n\t\t\t\tself.onPlaceHolder(function(placeholder) {\n\t\t\t\t\tself._set(element, placeholder);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\telement.style.backgroundImage = \"url(\" + self.options.placeholder + \")\";\n\t\t\t}\n\t\t},\n\t\taddElement: function(element) {\n\t\t\tvar self = this;\n\t\t\tvar uri = element.getAttribute('data-lazyload');\n\t\t\tif (uri) {\n\t\t\t\tif (self._hasPlaceholder(element)) {\n\t\t\t\t\tself.addCallback(element, self.handle);\n\t\t\t\t} else {\n\t\t\t\t\tself.onPlaceHolder = self._createLoader(function(callback) {\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\tvar placeholder = self.options.placeholder;\n\t\t\t\t\t\timg.src = placeholder;\n\t\t\t\t\t\timg.onload = img.onerror = function() {\n\t\t\t\t\t\t\tcallback(placeholder);\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tself._addPlaceHolder(element);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function(element, uri) {\n\t\t\tvar self = this;\n\t\t\tvar img = new Image();\n\t\t\timg.onload = function() {\n\t\t\t\tself._set(element, uri);\n\t\t\t\t$.trigger(self.element, 'success', {\n\t\t\t\t\telement: element,\n\t\t\t\t\turi: uri\n\t\t\t\t});\n\t\t\t};\n\t\t\timg.onerror = function() {\n\t\t\t\t$.trigger(self.element, 'error', {\n\t\t\t\t\telement: element,\n\t\t\t\t\turi: uri\n\t\t\t\t});\n\t\t\t};\n\t\t\timg.src = uri;\n\t\t\telement.removeAttribute('data-lazyload'); //只尝试一次，后续可能支持多次尝试\n\t\t},\n\t\thandle: function(element, key) {\n\t\t\tvar uri = element.getAttribute('data-lazyload');\n\t\t\tif (uri) {\n\t\t\t\tthis.set(element, uri);\n\t\t\t\t//element.parentNode.parentNode.setAttribute('data-lazyload', 'true'); //debug\n\t\t\t}\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis._super();\n\t\t\tthis.element.removeAttribute('data-imageLazyload');\n\t\t}\n\n\t});\n\t$.fn.imageLazyload = function(options) {\n\t\tvar lazyloadApis = [];\n\t\tthis.each(function() {\n\t\t\tvar self = this;\n\t\t\tvar lazyloadApi = null;\n\t\t\tif (self === document || self === window) {\n\t\t\t\tself = document.body;\n\t\t\t}\n\t\t\tvar id = self.getAttribute('data-imageLazyload');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = lazyloadApi = new ImageLazyload(self, options);\n\t\t\t\tself.setAttribute('data-imageLazyload', id);\n\t\t\t} else {\n\t\t\t\tlazyloadApi = $.data[id];\n\t\t\t}\n\t\t\tlazyloadApis.push(lazyloadApi);\n\t\t});\n\t\treturn lazyloadApis.length === 1 ? lazyloadApis[0] : lazyloadApis;\n\t}\n})(mui, window, document);"]}