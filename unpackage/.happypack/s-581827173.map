{"version":3,"sources":["src\\static\\js\\mui.indexedlist.js"],"names":[],"mappings":"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","file":"mui.indexedlist.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/jxddH5PlusApp/unpackage","sourcesContent":["/**\n * IndexedList\n * 类似联系人应用中的联系人列表，可以按首字母分组\n * 右侧的字母定位工具条，可以快速定位列表位置\n * varstion 1.0.0\n * by Houfeng\n * Houfeng@DCloud.io\n **/\n\n(function($, window, document) {\n\n\tvar classSelector = function(name) {\n\t\treturn '.' + $.className(name);\n\t}\n\n\tvar IndexedList = $.IndexedList = $.Class.extend({\n\t\t/**\n\t\t * 通过 element 和 options 构造 IndexedList 实例\n\t\t **/\n\t\tinit: function(holder, options) {\n\t\t\tvar self = this;\n\t\t\tself.options = options || {};\n\t\t\tself.box = holder;\n\t\t\tif (!self.box) {\n\t\t\t\tthrow \"实例 IndexedList 时需要指定 element\";\n\t\t\t}\n\t\t\tself.createDom();\n\t\t\tself.findElements();\n\t\t\tself.caleLayout();\n\t\t\tself.bindEvent();\n\t\t},\n\t\tcreateDom: function() {\n\t\t\tvar self = this;\n\t\t\tself.el = self.el || {};\n\t\t\t//styleForSearch 用于搜索，此方式能在数据较多时获取很好的性能\n\t\t\tself.el.styleForSearch = document.createElement('style');\n\t\t\t(document.head || document.body).appendChild(self.el.styleForSearch);\n\t\t},\n\t\tfindElements: function() {\n\t\t\tvar self = this;\n\t\t\tself.el = self.el || {};\n\t\t\tself.el.search = self.box.querySelector(classSelector('indexed-list-search'));\n\t\t\tself.el.searchInput = self.box.querySelector(classSelector('indexed-list-search-input'));\n\t\t\tself.el.searchClear = self.box.querySelector(classSelector('indexed-list-search') + ' ' + classSelector('icon-clear'));\n\t\t\tself.el.bar = self.box.querySelector(classSelector('indexed-list-bar'));\n\t\t\tself.el.barItems = [].slice.call(self.box.querySelectorAll(classSelector('indexed-list-bar') + ' a'));\n\t\t\tself.el.inner = self.box.querySelector(classSelector('indexed-list-inner'));\n\t\t\tself.el.items = [].slice.call(self.box.querySelectorAll(classSelector('indexed-list-item')));\n\t\t\tself.el.liArray = [].slice.call(self.box.querySelectorAll(classSelector('indexed-list-inner') + ' li'));\n\t\t\tself.el.alert = self.box.querySelector(classSelector('indexed-list-alert'));\n\t\t},\n\t\tcaleLayout: function() {\n\t\t\tvar self = this;\n\t\t\tvar withoutSearchHeight = (self.box.offsetHeight - self.el.search.offsetHeight) + 'px';\n\t\t\tself.el.bar.style.height = withoutSearchHeight;\n\t\t\tself.el.inner.style.height = withoutSearchHeight;\n\t\t\tvar barItemHeight = ((self.el.bar.offsetHeight - 40) / self.el.barItems.length) + 'px';\n\t\t\tself.el.barItems.forEach(function(item) {\n\t\t\t\titem.style.height = barItemHeight;\n\t\t\t\titem.style.lineHeight = barItemHeight;\n\t\t\t});\n\t\t},\n\t\tscrollTo: function(group) {\n\t\t\tvar self = this;\n\t\t\tvar groupElement = self.el.inner.querySelector('[data-group=\"' + group + '\"]');\n\t\t\tif (!groupElement || (self.hiddenGroups && self.hiddenGroups.indexOf(groupElement) > -1)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tself.el.inner.scrollTop = groupElement.offsetTop;\n\t\t},\n\t\tbindBarEvent: function() {\n\t\t\tvar self = this;\n\t\t\tvar pointElement = null;\n\t\t\tvar findStart = function(event) {\n\t\t\t\tif (pointElement) {\n\t\t\t\t\tpointElement.classList.remove('active');\n\t\t\t\t\tpointElement = null;\n\t\t\t\t}\n\t\t\t\tself.el.bar.classList.add('active');\n\t\t\t\tvar point = event.changedTouches ? event.changedTouches[0] : event;\n\t\t\t\tpointElement = document.elementFromPoint(point.pageX, point.pageY);\n\t\t\t\tif (pointElement) {\n\t\t\t\t\tvar group = pointElement.innerText;\n\t\t\t\t\tif (group && group.length == 1) {\n\t\t\t\t\t\tpointElement.classList.add('active');\n\t\t\t\t\t\tself.el.alert.innerText = group;\n\t\t\t\t\t\tself.el.alert.classList.add('active');\n\t\t\t\t\t\tself.scrollTo(group);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t};\n\t\t\tvar findEnd = function(event) {\n\t\t\t\tself.el.alert.classList.remove('active');\n\t\t\t\tself.el.bar.classList.remove('active');\n\t\t\t\tif (pointElement) {\n\t\t\t\t\tpointElement.classList.remove('active');\n\t\t\t\t\tpointElement = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tself.el.bar.addEventListener($.EVENT_MOVE, function(event) {\n\t\t\t\tfindStart(event);\n\t\t\t}, false);\n\t\t\tself.el.bar.addEventListener($.EVENT_START, function(event) {\n\t\t\t\tfindStart(event);\n\t\t\t}, false);\n\t\t\tdocument.body.addEventListener($.EVENT_END, function(event) {\n\t\t\t\tfindEnd(event);\n\t\t\t}, false);\n\t\t\tdocument.body.addEventListener($.EVENT_CANCEL, function(event) {\n\t\t\t\tfindEnd(event);\n\t\t\t}, false);\n\t\t},\n\t\tsearch: function(keyword) {\n\t\t\tvar self = this;\n\t\t\tkeyword = (keyword || '').toLowerCase();\n\t\t\tvar selectorBuffer = [];\n\t\t\tvar groupIndex = -1;\n\t\t\tvar itemCount = 0;\n\t\t\tvar liArray = self.el.liArray;\n\t\t\tvar itemTotal = liArray.length;\n\t\t\tself.hiddenGroups = [];\n\t\t\tvar checkGroup = function(currentIndex, last) {\n\t\t\t\tif (itemCount >= currentIndex - groupIndex - (last ? 0 : 1)) {\n\t\t\t\t\tselectorBuffer.push(classSelector('indexed-list-inner li') + ':nth-child(' + (groupIndex + 1) + ')');\n\t\t\t\t\tself.hiddenGroups.push(liArray[groupIndex]);\n\t\t\t\t};\n\t\t\t\tgroupIndex = currentIndex;\n\t\t\t\titemCount = 0;\n\t\t\t}\n\t\t\tliArray.forEach(function(item) {\n\t\t\t\tvar currentIndex = liArray.indexOf(item);\n\t\t\t\tif (item.classList.contains($.className('indexed-list-group'))) {\n\t\t\t\t\tcheckGroup(currentIndex, false);\n\t\t\t\t} else {\n\t\t\t\t\tvar text = (item.innerText || '').toLowerCase();\n\t\t\t\t\tvar value = (item.getAttribute('data-value') || '').toLowerCase();\n\t\t\t\t\tvar tags = (item.getAttribute('data-tags') || '').toLowerCase();\n\t\t\t\t\tif (keyword && text.indexOf(keyword) < 0 &&\n\t\t\t\t\t\tvalue.indexOf(keyword) < 0 &&\n\t\t\t\t\t\ttags.indexOf(keyword) < 0) {\n\t\t\t\t\t\tselectorBuffer.push(classSelector('indexed-list-inner li') + ':nth-child(' + (currentIndex + 1) + ')');\n\t\t\t\t\t\titemCount++;\n\t\t\t\t\t}\n\t\t\t\t\tif (currentIndex >= itemTotal - 1) {\n\t\t\t\t\t\tcheckGroup(currentIndex, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (selectorBuffer.length >= itemTotal) {\n\t\t\t\tself.el.inner.classList.add('empty');\n\t\t\t} else if (selectorBuffer.length > 0) {\n\t\t\t\tself.el.inner.classList.remove('empty');\n\t\t\t\tself.el.styleForSearch.innerText = selectorBuffer.join(', ') + \"{display:none;}\";\n\t\t\t} else {\n\t\t\t\tself.el.inner.classList.remove('empty');\n\t\t\t\tself.el.styleForSearch.innerText = \"\";\n\t\t\t}\n\t\t},\n\t\tbindSearchEvent: function() {\n\t\t\tvar self = this;\n\t\t\tself.el.searchInput.addEventListener('input', function() {\n\t\t\t\tvar keyword = this.value;\n\t\t\t\tself.search(keyword);\n\t\t\t}, false);\n\t\t\t$(self.el.search).on('tap', classSelector('icon-clear'), function() {\n\t\t\t\tself.search('');\n\t\t\t}, false);\n\t\t},\n\t\tbindEvent: function() {\n\t\t\tvar self = this;\n\t\t\tself.bindBarEvent();\n\t\t\tself.bindSearchEvent();\n\t\t}\n\t});\n\n\t//mui(selector).indexedList 方式\n\t$.fn.indexedList = function(options) {\n\t\t//遍历选择的元素\n\t\tthis.each(function(i, element) {\n\t\t\tif (element.indexedList) return;\n\t\t\telement.indexedList = new IndexedList(element, options);\n\t\t});\n\t\treturn this[0] ? this[0].indexedList : null;\n\t};\n})(mui, window, document);"]}