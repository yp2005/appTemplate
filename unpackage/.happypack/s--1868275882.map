{"version":3,"sources":["src\\static\\js\\mui.zoom.js"],"names":["$","window","CLASS_ZOOM","className","CLASS_ZOOM_SCROLLER","SELECTOR_ZOOM","SELECTOR_ZOOM_SCROLLER","EVENT_PINCH_START","EVENT_PINCH","EVENT_PINCH_END","Zoom","element","options","zoom","extend","defaults","wrapper","scroller","querySelector","scrollerStyle","style","zoomer","zoomerStyle","init","gestureConfig","pinch","doubletap","initEvents","detach","action","target","onPinchstart","onPinch","onPinchend","EVENT_START","onTouchstart","EVENT_MOVE","onTouchMove","EVENT_CANCEL","onTouchEnd","EVENT_END","dragEvent","doubleTapEvent","e","imageIsMoved","isGesturing","stopPropagation","toggleZoom","detail","center","transition","time","translate","x","y","scale","scrollerTransition","scrollerTransform","zoomerTransition","zoomerTransform","currentScale","isScaling","maxZoom","Math","pow","minZoom","max","min","speed","setZoom","newScale","position","undefined","offset","top","left","offsetX","offsetY","_cal","imageMaxX","wrapperWidth","imageMaxY","wrapperHeight","imageMinX","imageMinY","offsetWidth","offsetHeight","imageWidth","imageHeight","scaledWidth","scaledHeight","imageIsTouched","imageCurrentX","imageCurrentY","imageTouchesStart","imageTouchesCurrent","imageStartX","imageStartY","velocityPrevPositionX","velocityPrevTime","velocityX","velocityPrevPositionY","velocityY","preventDefault","type","targetTouches","pageX","pageY","parseTranslateMatrix","getStyles","floor","now","abs","touches","length","momentumDurationX","momentumDurationY","momentumDistanceX","newPositionX","momentumDistanceY","newPositionY","momentumDuration","destroy","data","getAttribute","setAttribute","fn","zoomApis","each","zoomApi","self","id","uuid","push","mui"],"mappings":"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","file":"mui.zoom.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["(function($, window) {\n\tvar CLASS_ZOOM = $.className('zoom');\n\tvar CLASS_ZOOM_SCROLLER = $.className('zoom-scroller');\n\n\tvar SELECTOR_ZOOM = '.' + CLASS_ZOOM;\n\tvar SELECTOR_ZOOM_SCROLLER = '.' + CLASS_ZOOM_SCROLLER;\n\n\tvar EVENT_PINCH_START = 'pinchstart';\n\tvar EVENT_PINCH = 'pinch';\n\tvar EVENT_PINCH_END = 'pinchend';\n\tif ('ongesturestart' in window) {\n\t\tEVENT_PINCH_START = 'gesturestart';\n\t\tEVENT_PINCH = 'gesturechange';\n\t\tEVENT_PINCH_END = 'gestureend';\n\t}\n\t$.Zoom = function(element, options) {\n\t\tvar zoom = this;\n\n\t\tzoom.options = $.extend($.Zoom.defaults, options);\n\n\t\tzoom.wrapper = zoom.element = element;\n\t\tzoom.scroller = element.querySelector(SELECTOR_ZOOM_SCROLLER);\n\t\tzoom.scrollerStyle = zoom.scroller && zoom.scroller.style;\n\n\t\tzoom.zoomer = element.querySelector(SELECTOR_ZOOM);\n\t\tzoom.zoomerStyle = zoom.zoomer && zoom.zoomer.style;\n\n\t\tzoom.init = function() {\n\t\t\t//自动启用\n\t\t\t$.options.gestureConfig.pinch = true;\n\t\t\t$.options.gestureConfig.doubletap = true;\n\t\t\tzoom.initEvents();\n\t\t};\n\n\t\tzoom.initEvents = function(detach) {\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\n\t\t\tvar target = zoom.scroller;\n\n\t\t\ttarget[action](EVENT_PINCH_START, zoom.onPinchstart);\n\t\t\ttarget[action](EVENT_PINCH, zoom.onPinch);\n\t\t\ttarget[action](EVENT_PINCH_END, zoom.onPinchend);\n\n\t\t\ttarget[action]($.EVENT_START, zoom.onTouchstart);\n\t\t\ttarget[action]($.EVENT_MOVE, zoom.onTouchMove);\n\t\t\ttarget[action]($.EVENT_CANCEL, zoom.onTouchEnd);\n\t\t\ttarget[action]($.EVENT_END, zoom.onTouchEnd);\n\n\t\t\ttarget[action]('drag', zoom.dragEvent);\n\t\t\ttarget[action]('doubletap', zoom.doubleTapEvent);\n\t\t};\n\t\tzoom.dragEvent = function(e) {\n\t\t\tif (imageIsMoved || isGesturing) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t};\n\t\tzoom.doubleTapEvent = function(e) {\n\t\t\tzoom.toggleZoom(e.detail.center);\n\t\t};\n\t\tzoom.transition = function(style, time) {\n\t\t\ttime = time || 0;\n\t\t\tstyle['webkitTransitionDuration'] = time + 'ms';\n\t\t\treturn zoom;\n\t\t};\n\t\tzoom.translate = function(style, x, y) {\n\t\t\tx = x || 0;\n\t\t\ty = y || 0;\n\t\t\tstyle['webkitTransform'] = 'translate3d(' + x + 'px,' + y + 'px,0px)';\n\t\t\treturn zoom;\n\t\t};\n\t\tzoom.scale = function(style, scale) {\n\t\t\tscale = scale || 1;\n\t\t\tstyle['webkitTransform'] = 'translate3d(0,0,0) scale(' + scale + ')';\n\t\t\treturn zoom;\n\t\t};\n\t\tzoom.scrollerTransition = function(time) {\n\t\t\treturn zoom.transition(zoom.scrollerStyle, time);\n\t\t};\n\t\tzoom.scrollerTransform = function(x, y) {\n\t\t\treturn zoom.translate(zoom.scrollerStyle, x, y);\n\t\t};\n\t\tzoom.zoomerTransition = function(time) {\n\t\t\treturn zoom.transition(zoom.zoomerStyle, time);\n\t\t};\n\t\tzoom.zoomerTransform = function(scale) {\n\t\t\treturn zoom.scale(zoom.zoomerStyle, scale);\n\t\t};\n\n\t\t// Gestures\n\t\tvar scale = 1,\n\t\t\tcurrentScale = 1,\n\t\t\tisScaling = false,\n\t\t\tisGesturing = false;\n\t\tzoom.onPinchstart = function(e) {\n\t\t\tisGesturing = true;\n\t\t};\n\t\tzoom.onPinch = function(e) {\n\t\t\tif (!isScaling) {\n\t\t\t\tzoom.zoomerTransition(0);\n\t\t\t\tisScaling = true;\n\t\t\t}\n\t\t\tscale = (e.detail ? e.detail.scale : e.scale) * currentScale;\n\t\t\tif (scale > zoom.options.maxZoom) {\n\t\t\t\tscale = zoom.options.maxZoom - 1 + Math.pow((scale - zoom.options.maxZoom + 1), 0.5);\n\t\t\t}\n\t\t\tif (scale < zoom.options.minZoom) {\n\t\t\t\tscale = zoom.options.minZoom + 1 - Math.pow((zoom.options.minZoom - scale + 1), 0.5);\n\t\t\t}\n\t\t\tzoom.zoomerTransform(scale);\n\t\t};\n\t\tzoom.onPinchend = function(e) {\n\t\t\tscale = Math.max(Math.min(scale, zoom.options.maxZoom), zoom.options.minZoom);\n\t\t\tzoom.zoomerTransition(zoom.options.speed).zoomerTransform(scale);\n\t\t\tcurrentScale = scale;\n\t\t\tisScaling = false;\n\t\t};\n\t\tzoom.setZoom = function(newScale) {\n\t\t\tscale = currentScale = newScale;\n\t\t\tzoom.scrollerTransition(zoom.options.speed).scrollerTransform(0, 0);\n\t\t\tzoom.zoomerTransition(zoom.options.speed).zoomerTransform(scale);\n\t\t};\n\t\tzoom.toggleZoom = function(position, speed) {\n\t\t\tif (typeof position === 'number') {\n\t\t\t\tspeed = position;\n\t\t\t\tposition = undefined;\n\t\t\t}\n\t\t\tspeed = typeof speed === 'undefined' ? zoom.options.speed : speed;\n\t\t\tif (scale && scale !== 1) {\n\t\t\t\tscale = currentScale = 1;\n\t\t\t\tzoom.scrollerTransition(speed).scrollerTransform(0, 0);\n\t\t\t} else {\n\t\t\t\tscale = currentScale = zoom.options.maxZoom;\n\t\t\t\tif (position) {\n\t\t\t\t\tvar offset = $.offset(zoom.zoomer);\n\t\t\t\t\tvar top = offset.top;\n\t\t\t\t\tvar left = offset.left;\n\t\t\t\t\tvar offsetX = (position.x - left) * scale;\n\t\t\t\t\tvar offsetY = (position.y - top) * scale;\n\t\t\t\t\tthis._cal();\n\t\t\t\t\tif (offsetX >= imageMaxX && offsetX <= (imageMaxX + wrapperWidth)) { //center\n\t\t\t\t\t\toffsetX = imageMaxX - offsetX + wrapperWidth / 2;\n\t\t\t\t\t} else if (offsetX < imageMaxX) { //left\n\t\t\t\t\t\toffsetX = imageMaxX - offsetX + wrapperWidth / 2;\n\t\t\t\t\t} else if (offsetX > (imageMaxX + wrapperWidth)) { //right\n\t\t\t\t\t\toffsetX = imageMaxX + wrapperWidth - offsetX - wrapperWidth / 2;\n\t\t\t\t\t}\n\t\t\t\t\tif (offsetY >= imageMaxY && offsetY <= (imageMaxY + wrapperHeight)) { //middle\n\t\t\t\t\t\toffsetY = imageMaxY - offsetY + wrapperHeight / 2;\n\t\t\t\t\t} else if (offsetY < imageMaxY) { //top\n\t\t\t\t\t\toffsetY = imageMaxY - offsetY + wrapperHeight / 2;\n\t\t\t\t\t} else if (offsetY > (imageMaxY + wrapperHeight)) { //bottom\n\t\t\t\t\t\toffsetY = imageMaxY + wrapperHeight - offsetY - wrapperHeight / 2;\n\t\t\t\t\t}\n\t\t\t\t\toffsetX = Math.min(Math.max(offsetX, imageMinX), imageMaxX);\n\t\t\t\t\toffsetY = Math.min(Math.max(offsetY, imageMinY), imageMaxY);\n\t\t\t\t\tzoom.scrollerTransition(speed).scrollerTransform(offsetX, offsetY);\n\t\t\t\t} else {\n\t\t\t\t\tzoom.scrollerTransition(speed).scrollerTransform(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tzoom.zoomerTransition(speed).zoomerTransform(scale);\n\t\t};\n\n\t\tzoom._cal = function() {\n\t\t\twrapperWidth = zoom.wrapper.offsetWidth;\n\t\t\twrapperHeight = zoom.wrapper.offsetHeight;\n\t\t\timageWidth = zoom.zoomer.offsetWidth;\n\t\t\timageHeight = zoom.zoomer.offsetHeight;\n\t\t\tvar scaledWidth = imageWidth * scale;\n\t\t\tvar scaledHeight = imageHeight * scale;\n\t\t\timageMinX = Math.min((wrapperWidth / 2 - scaledWidth / 2), 0);\n\t\t\timageMaxX = -imageMinX;\n\t\t\timageMinY = Math.min((wrapperHeight / 2 - scaledHeight / 2), 0);\n\t\t\timageMaxY = -imageMinY;\n\t\t};\n\n\t\tvar wrapperWidth, wrapperHeight, imageIsTouched, imageIsMoved, imageCurrentX, imageCurrentY, imageMinX, imageMinY, imageMaxX, imageMaxY, imageWidth, imageHeight, imageTouchesStart = {},\n\t\t\timageTouchesCurrent = {},\n\t\t\timageStartX, imageStartY, velocityPrevPositionX, velocityPrevTime, velocityX, velocityPrevPositionY, velocityY;\n\n\t\tzoom.onTouchstart = function(e) {\n\t\t\te.preventDefault();\n\t\t\timageIsTouched = true;\n\t\t\timageTouchesStart.x = e.type === $.EVENT_START ? e.targetTouches[0].pageX : e.pageX;\n\t\t\timageTouchesStart.y = e.type === $.EVENT_START ? e.targetTouches[0].pageY : e.pageY;\n\t\t};\n\t\tzoom.onTouchMove = function(e) {\n\t\t\te.preventDefault();\n\t\t\tif (!imageIsTouched) return;\n\t\t\tif (!imageIsMoved) {\n\t\t\t\twrapperWidth = zoom.wrapper.offsetWidth;\n\t\t\t\twrapperHeight = zoom.wrapper.offsetHeight;\n\t\t\t\timageWidth = zoom.zoomer.offsetWidth;\n\t\t\t\timageHeight = zoom.zoomer.offsetHeight;\n\t\t\t\tvar translate = $.parseTranslateMatrix($.getStyles(zoom.scroller, 'webkitTransform'));\n\t\t\t\timageStartX = translate.x || 0;\n\t\t\t\timageStartY = translate.y || 0;\n\t\t\t\tzoom.scrollerTransition(0);\n\t\t\t}\n\t\t\tvar scaledWidth = imageWidth * scale;\n\t\t\tvar scaledHeight = imageHeight * scale;\n\n\t\t\tif (scaledWidth < wrapperWidth && scaledHeight < wrapperHeight) return;\n\n\t\t\timageMinX = Math.min((wrapperWidth / 2 - scaledWidth / 2), 0);\n\t\t\timageMaxX = -imageMinX;\n\t\t\timageMinY = Math.min((wrapperHeight / 2 - scaledHeight / 2), 0);\n\t\t\timageMaxY = -imageMinY;\n\n\t\t\timageTouchesCurrent.x = e.type === $.EVENT_MOVE ? e.targetTouches[0].pageX : e.pageX;\n\t\t\timageTouchesCurrent.y = e.type === $.EVENT_MOVE ? e.targetTouches[0].pageY : e.pageY;\n\n\t\t\tif (!imageIsMoved && !isScaling) {\n\t\t\t\t//\t\t\t\tif (Math.abs(imageTouchesCurrent.y - imageTouchesStart.y) < Math.abs(imageTouchesCurrent.x - imageTouchesStart.x)) {\n\t\t\t\t//TODO 此处需要优化，当遇到长图，需要上下滚动时，下列判断会导致滚动不流畅\n\t\t\t\tif (\n\t\t\t\t\t(Math.floor(imageMinX) === Math.floor(imageStartX) && imageTouchesCurrent.x < imageTouchesStart.x) ||\n\t\t\t\t\t(Math.floor(imageMaxX) === Math.floor(imageStartX) && imageTouchesCurrent.x > imageTouchesStart.x)\n\t\t\t\t) {\n\t\t\t\t\timageIsTouched = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//\t\t\t\t}\n\t\t\t}\n\t\t\timageIsMoved = true;\n\t\t\timageCurrentX = imageTouchesCurrent.x - imageTouchesStart.x + imageStartX;\n\t\t\timageCurrentY = imageTouchesCurrent.y - imageTouchesStart.y + imageStartY;\n\n\t\t\tif (imageCurrentX < imageMinX) {\n\t\t\t\timageCurrentX = imageMinX + 1 - Math.pow((imageMinX - imageCurrentX + 1), 0.8);\n\t\t\t}\n\t\t\tif (imageCurrentX > imageMaxX) {\n\t\t\t\timageCurrentX = imageMaxX - 1 + Math.pow((imageCurrentX - imageMaxX + 1), 0.8);\n\t\t\t}\n\n\t\t\tif (imageCurrentY < imageMinY) {\n\t\t\t\timageCurrentY = imageMinY + 1 - Math.pow((imageMinY - imageCurrentY + 1), 0.8);\n\t\t\t}\n\t\t\tif (imageCurrentY > imageMaxY) {\n\t\t\t\timageCurrentY = imageMaxY - 1 + Math.pow((imageCurrentY - imageMaxY + 1), 0.8);\n\t\t\t}\n\n\t\t\t//Velocity\n\t\t\tif (!velocityPrevPositionX) velocityPrevPositionX = imageTouchesCurrent.x;\n\t\t\tif (!velocityPrevPositionY) velocityPrevPositionY = imageTouchesCurrent.y;\n\t\t\tif (!velocityPrevTime) velocityPrevTime = $.now();\n\t\t\tvelocityX = (imageTouchesCurrent.x - velocityPrevPositionX) / ($.now() - velocityPrevTime) / 2;\n\t\t\tvelocityY = (imageTouchesCurrent.y - velocityPrevPositionY) / ($.now() - velocityPrevTime) / 2;\n\t\t\tif (Math.abs(imageTouchesCurrent.x - velocityPrevPositionX) < 2) velocityX = 0;\n\t\t\tif (Math.abs(imageTouchesCurrent.y - velocityPrevPositionY) < 2) velocityY = 0;\n\t\t\tvelocityPrevPositionX = imageTouchesCurrent.x;\n\t\t\tvelocityPrevPositionY = imageTouchesCurrent.y;\n\t\t\tvelocityPrevTime = $.now();\n\n\t\t\tzoom.scrollerTransform(imageCurrentX, imageCurrentY);\n\t\t};\n\t\tzoom.onTouchEnd = function(e) {\n\t\t\tif (!e.touches.length) {\n\t\t\t\tisGesturing = false;\n\t\t\t}\n\t\t\tif (!imageIsTouched || !imageIsMoved) {\n\t\t\t\timageIsTouched = false;\n\t\t\t\timageIsMoved = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\timageIsTouched = false;\n\t\t\timageIsMoved = false;\n\t\t\tvar momentumDurationX = 300;\n\t\t\tvar momentumDurationY = 300;\n\t\t\tvar momentumDistanceX = velocityX * momentumDurationX;\n\t\t\tvar newPositionX = imageCurrentX + momentumDistanceX;\n\t\t\tvar momentumDistanceY = velocityY * momentumDurationY;\n\t\t\tvar newPositionY = imageCurrentY + momentumDistanceY;\n\n\t\t\tif (velocityX !== 0) momentumDurationX = Math.abs((newPositionX - imageCurrentX) / velocityX);\n\t\t\tif (velocityY !== 0) momentumDurationY = Math.abs((newPositionY - imageCurrentY) / velocityY);\n\t\t\tvar momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n\n\t\t\timageCurrentX = newPositionX;\n\t\t\timageCurrentY = newPositionY;\n\n\t\t\tvar scaledWidth = imageWidth * scale;\n\t\t\tvar scaledHeight = imageHeight * scale;\n\t\t\timageMinX = Math.min((wrapperWidth / 2 - scaledWidth / 2), 0);\n\t\t\timageMaxX = -imageMinX;\n\t\t\timageMinY = Math.min((wrapperHeight / 2 - scaledHeight / 2), 0);\n\t\t\timageMaxY = -imageMinY;\n\t\t\timageCurrentX = Math.max(Math.min(imageCurrentX, imageMaxX), imageMinX);\n\t\t\timageCurrentY = Math.max(Math.min(imageCurrentY, imageMaxY), imageMinY);\n\n\t\t\tzoom.scrollerTransition(momentumDuration).scrollerTransform(imageCurrentX, imageCurrentY);\n\t\t};\n\t\tzoom.destroy = function() {\n\t\t\tzoom.initEvents(true); //detach\n\t\t\tdelete $.data[zoom.wrapper.getAttribute('data-zoomer')];\n\t\t\tzoom.wrapper.setAttribute('data-zoomer', '');\n\t\t}\n\t\tzoom.init();\n\t\treturn zoom;\n\t};\n\t$.Zoom.defaults = {\n\t\tspeed: 300,\n\t\tmaxZoom: 3,\n\t\tminZoom: 1,\n\t};\n\t$.fn.zoom = function(options) {\n\t\tvar zoomApis = [];\n\t\tthis.each(function() {\n\t\t\tvar zoomApi = null;\n\t\t\tvar self = this;\n\t\t\tvar id = self.getAttribute('data-zoomer');\n\t\t\tif (!id) {\n\t\t\t\tid = ++$.uuid;\n\t\t\t\t$.data[id] = zoomApi = new $.Zoom(self, options);\n\t\t\t\tself.setAttribute('data-zoomer', id);\n\t\t\t} else {\n\t\t\t\tzoomApi = $.data[id];\n\t\t\t}\n\t\t\tzoomApis.push(zoomApi);\n\t\t});\n\t\treturn zoomApis.length === 1 ? zoomApis[0] : zoomApis;\n\t};\n})(mui, window);"]}