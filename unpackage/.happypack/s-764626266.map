{"version":3,"sources":["src\\view\\buyer\\index\\main\\index.js"],"names":["use","router","mui","init","swipeBack","plusReady","start","isLogin","getLoginUserInfo","user_type","homeSwitchButtonDisplay","hdstyle","homeSwitchButton","display","text","homeSwitch","openWindow","PAGE_URL","seller_index","id","styles","popGesture","title","searchBar","placeholder","modelName","searchTypeBut","name","value","hotSearch","gotoPage","rightButton","onClick","that","webview","plus","currentWebview","fire","edit","rightBarcodeBtn","color","os","android","show","aniShow","autoShow","duration","setTimeout","navigator","setStatusBarBackground","setStatusBarStyle","setFullscreen","hrefes","href","icon","typeclass","index","showHeader","HeaderVue","extend","header","propsData","el","FootVue","footer","watch","navIndex","app","first","back","Date","getTime","toast","runtime","quit","window","addEventListener","WEBVIEW_SHOW_EVENT","event","detail","toptext","buytype"],"mappings":"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","file":"index.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["// 引入vue\r\nimport Vue from 'vue';\r\nimport VueRouter from 'vue-router';\r\nimport app from './app';\r\nimport muiUtils from 'common/muiUtils';\r\nimport CONSTS from 'common/consts';\nimport pageUrl from 'api';\r\nimport vheader from 'component/mui/Header.vue';\r\nimport vnav from 'component/mui/NavTabbar.vue';\r\n\r\nVue.use(VueRouter);\r\nlet router = new VueRouter();\r\n\r\n//mui生命周期管理\r\nmui.init({\r\n    swipeBack: false\r\n});\nmui.plusReady(function() {\n    router.start(app, '#app');\n});\n\nlet isLogin = (muiUtils.getLoginUserInfo() || {}).user_type === 2;\n// 用户是卖家时候才显示首页切换按钮\nlet homeSwitchButtonDisplay = 'none';\nif (isLogin) { // 已登录\n  // let user_type = CONSTS.USER_TYPE;\n  // 如果是供应商，跳转到卖家首页\r\n    if (muiUtils.getLoginUserInfo().user_type === 2) {\n        homeSwitchButtonDisplay = 'block';\n    }\r\n}\r\n\r\n// head 和 foot所用参数\r\nlet hdstyle = {\n    homeSwitchButton: {\r\n        display: homeSwitchButtonDisplay,\r\n        text: '买家版',\r\n        homeSwitch: function() {\r\n            muiUtils.openWindow('../../seller/index/sellerindex.html', pageUrl.PAGE_URL.seller_index.id, {\r\n                styles: {\r\n                    popGesture: 'none'\r\n                }\r\n            });\r\n        }\r\n    },\r\n    title: {\r\n        display: 'none'\r\n    },\r\n    searchBar: {\r\n        display: true,\r\n        placeholder: '请输入关键字',\r\n        modelName: 'home', // 搜索历史在本地缓存中存放的key\r\n        searchTypeBut: [{ // 搜索页是否显示搜索类型下拉菜单按钮，不显示不要设置这个值\r\n            name: '商品',\r\n            value: 'goods'\r\n        }, {\n            name: '店铺',\r\n            value: 'store'\r\n        }],\r\n        hotSearch: true,\r\n        gotoPage: '../../buyer/homesearch/index.html'\r\n    },\r\n    rightButton: {\r\n        display: 'none',\r\n        text: '编辑',\r\n        onClick: function(that) {\r\n            let webview = plus.webview.currentWebview();\n            if (that.hdstyle.rightButton.text === '编辑') {\n                that.hdstyle.rightButton.text = '完成';\r\n                that.title = '已选择(0)';\r\n                mui.fire(webview, 'isedit', {\r\n                    edit: false\r\n                });\r\n            } else {\r\n                that.hdstyle.rightButton.text = '编辑';\r\n                that.title = '采购单';\r\n                mui.fire(webview, 'isedit', {\r\n                    edit: true\r\n                });\r\n            }\r\n        } // 右侧按钮点击事件处理方法\r\n    },\r\n    rightBarcodeBtn: {\r\n        display: true,\r\n        color: '#ffffff',\r\n        onClick: function() {\r\n            if (mui.os.android) {\r\n                muiUtils.openWindow('../../commonpage/barcodescan/index.html', 'commonpage_barcodescan_index.html');\r\n            } else {\r\n                muiUtils.openWindow('../../commonpage/barcodescan/index.html', 'commonpage_barcodescan_index.html', {\r\n                    styles: {\r\n                        popGesture: 'none'\r\n\n                    },\r\n                    show: {\r\n                        aniShow: 'slide-in-top',\r\n                        autoShow: true,\r\n                        duration: 300\r\n                    }\r\n                });\r\n                setTimeout(() => {\r\n                    plus.navigator.setStatusBarBackground('#000000');\r\n                    plus.navigator.setStatusBarStyle('UIStatusBarStyleDefault');\r\n                    plus.navigator.setFullscreen(true);\r\n                }, 100);\n            }\r\n        }\r\n    }\r\n};\r\nlet hrefes = [{\n    href: '/home',\r\n    text: '首页',\r\n    icon: 'icon-shouye'\r\n}, {\r\n    href: '/type',\r\n    text: '分类',\r\n    icon: 'icon-fenlei'\r\n}, {\r\n    href: '/order',\r\n    text: '采购单',\r\n    icon: 'icon-caigoudan'\r\n}, {\r\n    href: '/mine',\r\n    text: '我的',\r\n    icon: 'icon-gerenzhongxin'\r\n}];\r\nlet typeclass = isLogin ? 'buyHome' : 'buyHomeNoLogin';\nlet index = 0;\nlet showHeader = true;\n// 头部head start\r\nlet HeaderVue = Vue.extend(vheader);\nlet header = new HeaderVue({\n    propsData: {\r\n        hdstyle: hdstyle,\r\n        typeclass: typeclass,\r\n        title: hrefes[index].text,\r\n        showHeader: showHeader\r\n    },\r\n    el: 'vheader'\r\n});\r\n// 头部head end\r\n\r\n// 尾部foot start\r\nlet FootVue = Vue.extend(vnav);\n/*eslint-disable no-unused-vars */\nlet footer = new FootVue({\n    propsData: {\r\n        hdstyle: hdstyle,\r\n        hrefes: hrefes,\r\n        typeclass: typeclass,\r\n        showHeader: showHeader,\r\n        index: index\r\n    },\r\n    el: 'vnav',\r\n    watch: {\r\n        index: function() {\r\n            header.hdstyle = this.hdstyle;\r\n            header.title = hrefes[this.index].text;\r\n            header.typeclass = this.typeclass;\r\n            header.showHeader = this.showHeader;\n            header.navIndex = this.index;\r\n            router.app.index = this.index;\n        }\r\n    }\r\n});\r\n// 尾部 end\n\r\n// 两次点击返回\r\nlet first = null;\nmui.back = function() {\r\n  // 首次按键\r\n    if (!first) {\r\n        first = new Date().getTime();\r\n        mui.toast('再按一次退出');\r\n        setTimeout(function() {\r\n            first = null;\r\n        }, 1000);\r\n    } else {\r\n        if (new Date().getTime() - first < 1000) {\r\n            plus.runtime.quit();\r\n        }\r\n    }\r\n};\r\n\r\n// 监听页面返回首页事件\r\nwindow.addEventListener(CONSTS.WEBVIEW_SHOW_EVENT, function(event) {\r\n  // console.log('页面返回首页事件');\n    if (muiUtils.getLoginUserInfo()) { // 已登录\r\n    // let user_type = CONSTS.USER_TYPE;\r\n    // 如果是供应商，跳转到卖家首页\r\n        if (muiUtils.getLoginUserInfo().user_type === 2 && footer.index === 0) {\r\n            hdstyle.homeSwitchButton.display = 'block';\r\n            header.typeclass = 'buyHome';\r\n        } else {\r\n            header.hdstyle.homeSwitchButton.display = 'none';\r\n            typeclass = 'buyHomeNoLogin';\r\n        }\r\n    }\r\n});\r\n// 监听跳转采购单\r\nwindow.addEventListener('toptext', function(event) {\r\n    hdstyle.rightButton.text = event.detail.toptext;\r\n    header.title = event.detail.title;\r\n});\r\n// 监听购买数量\r\nwindow.addEventListener('buytype', function(event) {\r\n    if (hdstyle.rightButton.text === '编辑') {\r\n        header.title = '采购单';\r\n    } else {\r\n        header.title = '已选择(' + event.detail.buytype + ')';\r\n    }\r\n});\r\n"]}