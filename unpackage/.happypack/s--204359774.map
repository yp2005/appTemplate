{"version":3,"sources":["src\\common\\cacheUtils.js"],"names":[],"mappings":"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","file":"cacheUtils.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/jxddH5PlusApp/unpackage","sourcesContent":["'use strict';\r\n/*!\r\n * cacheUtils.js v1.0.0\r\n * 缓存工具类\r\n * 目前缓存有cookie、LocalStorage、SessionStorage\r\n * Dom Storage 是通过存储字符串的 Key/Value 对来提供的，并提供 5MB （不同浏览器可能不同，分 HOST)的存储空间（Cookies 才 4KB)。\r\n * 另外 Dom Storage 存储的数据在本地，不像 Cookies，每次请求一次页面，Cookies 都会发送给服务器。\r\n *\r\n * DOM Storage 分为 sessionStorage 和 localStorage。\r\n * localStorage 对象和 sessionStorage 对象使用方法基本相同，它们的区别在于作用的范围不同。\r\n * sessionStorage 用来存储与页面相关的数据，它在页面关闭后无法使用。\r\n * 而 localStorage 则持久存在，在页面关闭后也可以使用\r\n *\n * Author: liaoxm\r\n * Date: 2016-06-17\r\n *\r\n */\r\nimport CONSTS from './consts';\r\n\r\nconst sessionStorage = prefix => {\r\n  /**\r\n   * @desc 存入缓存\r\n   * @param {String} key\n   * @param {String} val\n   * @public\r\n   */\r\n    var set = (key, val) => {\r\n        key = prefix + '_' + key;\r\n        if (!window.sessionStorage) {\r\n            window.alert('Your browser not support localStorage. Please check set browser private model.');\r\n            return;\r\n        }\r\n        try {\r\n            window.sessionStorage.setItem(key, val);\r\n        } catch (e) {\r\n            window.console.warn('Your browser not support localStorage. ' + e);\r\n            window.alert('Your browser not support localStorage. Please check set browser private model.');\r\n        }\r\n    };\r\n\n  /**\r\n   * @desc 获取数据\r\n   * @param {String} key\r\n   * @return {String} 获取的字符串内容\n   * @public\r\n   */\r\n    var get = key => {\r\n        key = prefix + '_' + key;\r\n        return window.sessionStorage.getItem(key);\r\n    };\r\n    return {\r\n        set: set,\r\n        get: get,\r\n\n    /**\r\n     * @desc 存入缓存，Object\r\n     * @param {String} key\n     * @param {Object} val\n     * @public\r\n     */\r\n        setObject: (key, val) => {\r\n            val = JSON.stringify(val);\r\n            set(key, val);\r\n        },\r\n\n    /**\r\n     * @desc 获取数据,Object\r\n     * @param {String} key\r\n     * @return {Object}\n     * @public\r\n     */\r\n        getObject: key => {\r\n            let result = get(key);\n            let json = null;\n            if (!result) {\r\n                return undefined;\r\n            } else {\n                try {\n                    json = JSON.parse(result);\n                } catch (e) {\n                    console.log('缓存数据解决json异常!');\n                }\n                return json;\n            }\r\n        },\r\n\r\n    /**\r\n     * @desc 删除数据\r\n     * @param {String} key\n     * @public\r\n     */\r\n        del: key => {\r\n            key = prefix + '_' + key;\r\n            window.sessionStorage.removeItem(key);\r\n        },\r\n\r\n    /**\r\n     * @desc 清理缓存\r\n     * @public\r\n     */\r\n        clear: () => {\r\n            window.sessionStorage.clear();\r\n        },\r\n\n    /**\r\n     * @desc 获取key根据角标\r\n     * @param {Number} i\n     * @return {String} val\n     * @public\r\n     */\n        key: i => {\r\n            i = i || 0;\r\n            return Object.keys(window.sessionStorage)[i];\r\n        },\r\n\n    // 获取所有的key\r\n        keys: () => {\r\n            return Object.keys(window.sessionStorage);\r\n        },\r\n\n    // 获取所有的value\r\n        values: () => {\r\n            return Object.values(window.sessionStorage);\r\n        },\r\n\n        length: () => {\r\n            return Object.keys(window.sessionStorage).length;\r\n        }\r\n    };\r\n};\r\n\r\nconst localStorage = prefix => {\n  /**\r\n   * @desc 存入缓存，String\r\n   * @param {String} key\n   * @param {String} val\n   * @public\r\n   */\r\n    var set = (key, val) => {\r\n        key = prefix + '_' + key;\r\n        if (!window.localStorage) {\r\n            window.alert('Your browser not support localStorage. Please check set browser private model.');\r\n            return;\r\n        }\r\n        try {\r\n            window.localStorage.setItem(key, val);\r\n        } catch (e) {\r\n            window.console.warn('Your browser not support localStorage. ' + e);\r\n            window.alert('Your browser not support localStorage. Please check set browser private model.');\r\n        }\r\n    };\r\n\n  /**\r\n   * @desc 获取数据,String\r\n   * @param {String} key\r\n   * @return {String}\n   * @public\r\n   */\r\n    var get = key => {\r\n        key = prefix + '_' + key;\r\n        return window.localStorage.getItem(key) === 'null' ? '' : window.localStorage.getItem(key);\r\n    };\r\n    return {\r\n\n        set: set,\r\n        get: get,\r\n\n    /**\r\n     * @desc 存入缓存，Object\r\n     * @param {String} key\n     * @param {Object} val\n     * @public\r\n     */\r\n        setObject: (key, val) => {\r\n            val = JSON.stringify(val);\r\n            set(key, val);\r\n        },\r\n\n    /**\r\n     * @desc 获取数据,Object\r\n     * @param {String} key\r\n     * @return {Object}\n     * @public\r\n     */\r\n        getObject: key => {\r\n            let result = get(key);\r\n            let json = null;\n            if (!result) {\n                return undefined;\n            } else {\n                try {\n                    json = JSON.parse(result);\n                } catch (e) {\n                    console.log('缓存数据解决json异常!');\n                }\n                return json;\n            }\n        },\r\n\r\n    /**\r\n     * @desc 删除数据\r\n     * @param {String} key\r\n     * @public\r\n     */\r\n        del: key => {\r\n            key = prefix + '_' + key;\r\n            window.localStorage.removeItem(key);\r\n        },\r\n\r\n    /**\r\n     * @desc 清除数据,instanceId需要保留\n     * @param {String} key\r\n     * @public\r\n     */\r\n        clear: () => {\r\n            var instanceId = window.localStorage.getItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.APP_INSTANCE_ID);\n            window.localStorage.clear();\r\n            window.localStorage.setItem(CONSTS.PREFIX_LOGIN + '_' + CONSTS.APP_INSTANCE_ID, instanceId === undefined ? '' : instanceId);\n            cookie.clear();\r\n            window.sessionStorage.clear();\r\n        },\r\n\n    /**\r\n     * @desc 获取key根据角标\r\n     * @param {Number} i\r\n     * @return {String} key\r\n     * @public\r\n     */\r\n        key: i => {\r\n            i = i || 0;\r\n            return Object.keys(window.localStorage)[i];\r\n        },\r\n\n    /**\r\n     * @desc 获取所有的key\r\n     * @param {Number} i\r\n     * @return {Array} key数组\n     * @public\r\n     */\r\n        keys: () => {\r\n            return Object.keys(window.localStorage);\r\n        },\r\n\n    /**\r\n     * @desc 获取所有的value\r\n     * @return {Object} 数据集合\r\n     * @public\r\n     */\r\n        values: () => {\r\n            return Object.values(window.localStorage);\r\n        },\r\n\n    /**\r\n     * @desc 获取key的数量\r\n     * @return {Number} key数量\r\n     * @public\r\n     */\n        length: () => {\r\n            return Object.keys(window.localStorage).length;\r\n        }\r\n    };\r\n};\r\n\r\n/**\r\n * 缓存cookie默认存储一个月\r\n * @type {Object}\r\n */\r\nconst cookie = {\r\n  /**\r\n   * @desc 存入缓存，String\r\n   * @param {String} key\n   * @param {String} val\n   * @param {time} time 保留时间\r\n   * @param {String} domain  域名\r\n   * @public\r\n   */\r\n    set: (key, val, time, domain) => {\r\n        var exp = new Date();\r\n        var t = !time ? (exp.getTime() + 2592000000) : (exp.getTime() + time);\r\n        exp.setTime(t);\r\n\r\n        if (domain === true) {\r\n      /* no-useless-escape */\r\n      // .xx.com\r\n            domain = document.domain.replace(/[a-zA-Z]+/, '');\r\n        }\r\n        var extr = domain ? ';domain=' + domain + ';path=/' : '';\r\n        document.cookie = key + '=' + escape(val) + ';expires=' + exp.toGMTString() + extr;\r\n    },\r\n\n  /**\r\n   * @desc 获取数据,String\r\n   * @param {String} key\r\n   * @return {String}\n   * @public\r\n   */\r\n    get: key => {\r\n        var reg = new RegExp('(^| )' + key + '=([^;]*)(;|$)');\r\n        var arr = document.cookie.match(reg);\r\n        return arr ? unescape(arr[2]) : '';\r\n    },\r\n\n  /**\r\n   * @desc 存入缓存，Object\r\n   * @param {String} key\n   * @param {Object} val\n   * @public\r\n   */\r\n    setObject: (key, val, time, domain) => {\r\n        val = JSON.stringify(val);\r\n        var exp = new Date();\r\n        var t = !time ? (exp.getTime() + 2592000000) : (exp.getTime() + time);\r\n        exp.setTime(t);\r\n\r\n        if (domain === true) {\r\n      /* no-useless-escape */\r\n      // .xx.com\r\n            domain = document.domain.replace(/[a-zA-Z]+/, '');\r\n        }\r\n        var extr = domain ? ';domain=' + domain + ';path=/' : '';\r\n        document.cookie = key + '=' + escape(val) + ';expires=' + exp.toGMTString() + extr;\r\n    },\r\n\n  /**\r\n   * @desc 获取数据,Object\r\n   * @param {String} key\r\n   * @return {Object}\n   * @public\r\n   */\r\n    getObject: key => {\r\n        var reg = new RegExp('(^| )' + key + '=([^;]*)(;|$)');\r\n        var arr = document.cookie.match(reg);\n        let json = null;\n        try {\n            json = JSON.parse(arr ? unescape(arr[2]) : '');\n        } catch (e) {\n            console.log('缓存数据解决json异常!');\n        }\n        return json;\n    },\r\n\n  /**\r\n   * @desc 删除数据\r\n   * @param {String} key\r\n   * @param {String} domain  域名\r\n   * @public\r\n   */\r\n    del: (key, domain) => {\r\n        var exp = new Date();\r\n        exp.setTime(exp.getTime() - 1);\r\n        var cval = this.get(key);\r\n\r\n        if (domain === true) {\r\n            domain = document.domain.replace(/[a-zA-Z]+/, '');\r\n        }\r\n        var extr = domain ? ';domain=' + domain + ';path=/' : '';\r\n        if (cval) {\n            document.cookie = key + '=1;expires=' + exp.toGMTString() + extr;\n        }\n    },\r\n\n  /**\r\n   * @desc 清理数据\r\n   * @public\r\n   */\r\n    clear: () => {\r\n        var keys = document.cookie.match(/[^ =;]+(?==)/g);\r\n        if (!keys || !keys.length) return;\r\n        for (var i = keys.length; i--;) {\r\n            document.cookie = keys[i] + '=0;expires=Thu, 01 Jan 1970 00:00:00 GMT;';\r\n        }\r\n    }\r\n};\r\n\r\nexport default {\r\n    localStorage,\r\n    cookie,\r\n    sessionStorage\n};\r\n\r\nexport { localStorage, cookie, sessionStorage };\n"]}