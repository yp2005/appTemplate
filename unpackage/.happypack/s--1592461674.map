{"version":3,"sources":["src\\static\\js\\mui.previewimage.js"],"names":["$","window","template","itemTemplate","defaultGroupName","div","document","createElement","imgId","PreviewImage","options","extend","id","zoom","header","footer","init","initEvent","proto","prototype","el","getElementById","innerHTML","replace","body","appendChild","firstElementChild","element","scroller","querySelector","classSelector","indicator","loader","classList","remove","className","addImages","self","on","open","laterClose","laterCloseEvent","later","removeEventListener","close","addEventListener","cancel","contains","style","display","e","lastZoomerEl","lastIndex","setZoom","slideNumber","detail","innerText","currentGroup","length","_loadItem","group","index","groups","imgs","querySelectorAll","i","len","addImage","img","getAttribute","src","__mui_img_data","push","lazyload","imgObj","loaded","sWidth","sHeight","sTop","sLeft","sScale","empty","_initImgData","itemData","imgEl","offsetWidth","offsetHeight","offset","top","left","Math","max","innerWidth","innerHeight","webkitTransform","_getScale","from","to","scaleX","width","scaleY","height","scale","_imgTransitionEnd","target","bind","isOpening","itemEl","posi","_getPosition","webkitTransitionDuration","x","y","add","loadImage","_initZoom","setAttribute","_preloadItem","zoomWrapperEl","zoomerWidth","zoomerHeight","zoomEl","tagName","maxZoom","callback","onReady","call","Image","onload","onerror","getRangeByIndex","pageXOffset","pageYOffset","refresh","groupArray","itemHtml","currentRange","currentIndex","itemStr","wWidth","wHeight","join","slider","gotoItem","openByGroup","min","isShown","indexOf","opacity","parentNode","toggleZoom","zoomers","destroy","previewImageApi","previewImage","getPreviewImage","mui"],"mappings":";;AAAA,CAAC,UAASA,CAAT,EAAYC,MAAZ,EAAoB;;AAEpB,KAAIC,WAAW,sTAAf;AACA,KAAIC,eAAe,oMAAnB;AACA,KAAIC,mBAAmB,WAAvB;AACA,KAAIC,MAAMC,SAASC,aAAT,CAAuB,KAAvB,CAAV;AACA,KAAIC,QAAQ,CAAZ;AACA,KAAIC,eAAe,SAAfA,YAAe,CAASC,OAAT,EAAkB;AACpC,OAAKA,OAAL,GAAeV,EAAEW,MAAF,CAAS,IAAT,EAAe;AAC7BC,OAAI,oBADyB;AAE7BC,SAAM,IAFuB;AAG7BC,WAAQ,6CAHqB;AAI7BC,WAAQ;AAJqB,GAAf,EAKZL,WAAW,EALC,CAAf;AAMA,OAAKM,IAAL;AACA,OAAKC,SAAL;AACA,EATD;AAUA,KAAIC,QAAQT,aAAaU,SAAzB;AACAD,OAAMF,IAAN,GAAa,YAAW;AACvB,MAAIN,UAAU,KAAKA,OAAnB;AACA,MAAIU,KAAKd,SAASe,cAAT,CAAwB,KAAKX,OAAL,CAAaE,EAArC,CAAT;AACA,MAAI,CAACQ,EAAL,EAAS;AACRf,OAAIiB,SAAJ,GAAgBpB,SAASqB,OAAT,CAAiB,aAAjB,EAAgC,KAAKb,OAAL,CAAaE,EAA7C,EAAiDW,OAAjD,CAAyD,YAAzD,EAAuEb,QAAQI,MAA/E,EAAuFS,OAAvF,CAA+F,YAA/F,EAA6Gb,QAAQK,MAArH,CAAhB;AACAT,YAASkB,IAAT,CAAcC,WAAd,CAA0BpB,IAAIqB,iBAA9B;AACAN,QAAKd,SAASe,cAAT,CAAwB,KAAKX,OAAL,CAAaE,EAArC,CAAL;AACA;;AAED,OAAKe,OAAL,GAAeP,EAAf;AACA,OAAKQ,QAAL,GAAgB,KAAKD,OAAL,CAAaE,aAAb,CAA2B7B,EAAE8B,aAAF,CAAgB,eAAhB,CAA3B,CAAhB;AACA,OAAKC,SAAL,GAAiB,KAAKJ,OAAL,CAAaE,aAAb,CAA2B7B,EAAE8B,aAAF,CAAgB,oBAAhB,CAA3B,CAAjB;AACA,OAAKE,MAAL,GAAc,KAAKL,OAAL,CAAaE,aAAb,CAA2B7B,EAAE8B,aAAF,CAAgB,kBAAhB,CAA3B,CAAd;AACA,MAAIpB,QAAQK,MAAZ,EAAoB;AACnB,QAAKY,OAAL,CAAaE,aAAb,CAA2B7B,EAAE8B,aAAF,CAAgB,iBAAhB,CAA3B,EAA+DG,SAA/D,CAAyEC,MAAzE,CAAgFlC,EAAEmC,SAAF,CAAY,QAAZ,CAAhF;AACA;AACD,OAAKC,SAAL;AACA,EAjBD;AAkBAlB,OAAMD,SAAN,GAAkB,YAAW;AAC5B,MAAIoB,OAAO,IAAX;AACArC,IAAEM,SAASkB,IAAX,EAAiBc,EAAjB,CAAoB,KAApB,EAA2B,uBAA3B,EAAoD,YAAW;AAC9DD,QAAKE,IAAL,CAAU,IAAV;AACA,UAAO,KAAP;AACA,GAHD;AAIA,MAAIC,aAAa,IAAjB;AACA,MAAIC,kBAAkB,SAAlBA,eAAkB,GAAW;AAChC,IAACD,UAAD,KAAgBA,aAAaxC,EAAE0C,KAAF,CAAQ,YAAW;AAC/CL,SAAKL,MAAL,CAAYW,mBAAZ,CAAgC,KAAhC,EAAuCF,eAAvC;AACAJ,SAAKT,QAAL,CAAce,mBAAd,CAAkC,KAAlC,EAAyCF,eAAzC;AACAJ,SAAKO,KAAL;AACA,IAJ4B,EAI1B,GAJ0B,CAA7B;AAKA,GAND;AAOA,OAAKhB,QAAL,CAAciB,gBAAd,CAA+B,WAA/B,EAA4C,YAAW;AACtD,OAAIL,UAAJ,EAAgB;AACfA,eAAWM,MAAX;AACAN,iBAAa,IAAb;AACA;AACD,GALD;AAMA,OAAKb,OAAL,CAAakB,gBAAb,CAA8B,oBAA9B,EAAoD,YAAW;AAC9D,OAAIR,KAAKV,OAAL,CAAaM,SAAb,CAAuBc,QAAvB,CAAgC/C,EAAEmC,SAAF,CAAY,aAAZ,CAAhC,CAAJ,EAAiE;AAChEE,SAAKV,OAAL,CAAaqB,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AACAZ,SAAKV,OAAL,CAAaM,SAAb,CAAuBC,MAAvB,CAA8BlC,EAAEmC,SAAF,CAAY,aAAZ,CAA9B;AACAE,SAAKV,OAAL,CAAaM,SAAb,CAAuBC,MAAvB,CAA8BlC,EAAEmC,SAAF,CAAY,YAAZ,CAA9B;AACAK,iBAAa,IAAb;AACA,IALD,MAKO;AACNH,SAAKL,MAAL,CAAYa,gBAAZ,CAA6B,KAA7B,EAAoCJ,eAApC;AACAJ,SAAKT,QAAL,CAAciB,gBAAd,CAA+B,KAA/B,EAAsCJ,eAAtC;AACA;AACD,GAVD;AAWA,OAAKd,OAAL,CAAakB,gBAAb,CAA8B,OAA9B,EAAuC,UAASK,CAAT,EAAY;AAClD,OAAIb,KAAK3B,OAAL,CAAaG,IAAjB,EAAuB;AACtB,QAAIsC,eAAed,KAAKV,OAAL,CAAaE,aAAb,CAA2B,kCAAkCQ,KAAKe,SAAL,GAAiB,CAAnD,IAAwD,GAAnF,CAAnB;AACA,QAAID,YAAJ,EAAkB;AACjBnD,OAAEmD,YAAF,EAAgBtC,IAAhB,GAAuBwC,OAAvB,CAA+B,CAA/B;AACA;AACD;AACD,OAAIC,cAAcJ,EAAEK,MAAF,CAASD,WAA3B;AACAjB,QAAKe,SAAL,GAAiBE,WAAjB;AACAjB,QAAKN,SAAL,KAAmBM,KAAKN,SAAL,CAAeyB,SAAf,GAA4BF,cAAc,CAAf,GAAoB,GAApB,GAA0BjB,KAAKoB,YAAL,CAAkBC,MAA1F;AACArB,QAAKsB,SAAL,CAAeL,WAAf;AAEA,GAZD;AAaA,EA5CD;AA6CApC,OAAMkB,SAAN,GAAkB,UAASwB,KAAT,EAAgBC,KAAhB,EAAuB;AACxC,OAAKC,MAAL,GAAc,EAAd;AACA,MAAIC,OAAO,EAAX;AACA,MAAIH,KAAJ,EAAW;AACV,OAAIA,UAAUxD,gBAAd,EAAgC;AAC/B2D,WAAOzD,SAAS0D,gBAAT,CAA0B,iDAA1B,CAAP;AACA,IAFD,MAEO;AACND,WAAOzD,SAAS0D,gBAAT,CAA0B,+CAA+CJ,KAA/C,GAAuD,IAAjF,CAAP;AACA;AACD,GAND,MAMO;AACNG,UAAOzD,SAAS0D,gBAAT,CAA0B,uBAA1B,CAAP;AACA;AACD,MAAID,KAAKL,MAAT,EAAiB;AAChB,QAAK,IAAIO,IAAI,CAAR,EAAWC,MAAMH,KAAKL,MAA3B,EAAmCO,IAAIC,GAAvC,EAA4CD,GAA5C,EAAiD;AAChD,SAAKE,QAAL,CAAcJ,KAAKE,CAAL,CAAd;AACA;AACD;AACD,EAjBD;AAkBA/C,OAAMiD,QAAN,GAAiB,UAASC,GAAT,EAAc;AAC9B,MAAIR,QAAQQ,IAAIC,YAAJ,CAAiB,oBAAjB,CAAZ;AACAT,UAAQA,SAASxD,gBAAjB;AACA,MAAI,CAAC,KAAK0D,MAAL,CAAYF,KAAZ,CAAL,EAAyB;AACxB,QAAKE,MAAL,CAAYF,KAAZ,IAAqB,EAArB;AACA;AACD,MAAIU,MAAMF,IAAIC,YAAJ,CAAiB,KAAjB,CAAV;AACA,MAAID,IAAIG,cAAJ,IAAsBH,IAAIG,cAAJ,CAAmBD,GAAnB,KAA2BA,GAArD,EAA0D;AACzD,QAAKR,MAAL,CAAYF,KAAZ,EAAmBY,IAAnB,CAAwBJ,IAAIG,cAA5B;AACA,GAFD,MAEO;AACN,OAAIE,WAAWL,IAAIC,YAAJ,CAAiB,kBAAjB,CAAf;AACA,OAAI,CAACI,QAAL,EAAe;AACdA,eAAWH,GAAX;AACA;AACD,OAAII,SAAS;AACZJ,SAAKA,GADO;AAEZG,cAAUH,QAAQG,QAAR,GAAmB,EAAnB,GAAwBA,QAFtB;AAGZE,YAAQL,QAAQG,QAAR,GAAmB,IAAnB,GAA0B,KAHtB;AAIZG,YAAQ,CAJI;AAKZC,aAAS,CALG;AAMZC,UAAM,CANM;AAOZC,WAAO,CAPK;AAQZC,YAAQ,CARI;AASZ5D,QAAIgD;AATQ,IAAb;AAWA,QAAKN,MAAL,CAAYF,KAAZ,EAAmBY,IAAnB,CAAwBE,MAAxB;AACAN,OAAIG,cAAJ,GAAqBG,MAArB;AACA;AACD,EA5BD;;AA+BAxD,OAAM+D,KAAN,GAAc,YAAW;AACxB,OAAKrD,QAAL,CAAcN,SAAd,GAA0B,EAA1B;AACA,EAFD;AAGAJ,OAAMgE,YAAN,GAAqB,UAASC,QAAT,EAAmBC,KAAnB,EAA0B;AAC9C,MAAI,CAACD,SAASP,MAAd,EAAsB;AACrB,OAAIR,MAAMe,SAAS/D,EAAnB;AACA+D,YAASP,MAAT,GAAkBR,IAAIiB,WAAtB;AACAF,YAASN,OAAT,GAAmBT,IAAIkB,YAAvB;AACA,OAAIC,SAASvF,EAAEuF,MAAF,CAASnB,GAAT,CAAb;AACAe,YAASL,IAAT,GAAgBS,OAAOC,GAAvB;AACAL,YAASJ,KAAT,GAAiBQ,OAAOE,IAAxB;AACAN,YAASH,MAAT,GAAkBU,KAAKC,GAAL,CAASR,SAASP,MAAT,GAAkB3E,OAAO2F,UAAlC,EAA8CT,SAASN,OAAT,GAAmB5E,OAAO4F,WAAxE,CAAlB;AACA;AACDT,QAAMpC,KAAN,CAAY8C,eAAZ,GAA8B,8BAA8BX,SAASH,MAAvC,GAAgD,GAA9E;AACA,EAXD;;AAaA9D,OAAM6E,SAAN,GAAkB,UAASC,IAAT,EAAeC,EAAf,EAAmB;AACpC,MAAIC,SAASF,KAAKG,KAAL,GAAaF,GAAGE,KAA7B;AACA,MAAIC,SAASJ,KAAKK,MAAL,GAAcJ,GAAGI,MAA9B;AACA,MAAIC,QAAQ,CAAZ;AACA,MAAIJ,UAAUE,MAAd,EAAsB;AACrBE,WAAQN,KAAKK,MAAL,IAAeJ,GAAGI,MAAH,GAAYH,MAA3B,CAAR;AACA,GAFD,MAEO;AACNI,WAAQN,KAAKG,KAAL,IAAcF,GAAGE,KAAH,GAAWC,MAAzB,CAAR;AACA;AACD,SAAOE,KAAP;AACA,EAVD;AAWApF,OAAMqF,iBAAN,GAA0B,UAASrD,CAAT,EAAY;AACrC,MAAIkB,MAAMlB,EAAEsD,MAAZ;AACApC,MAAInC,SAAJ,CAAcC,MAAd,CAAqBlC,EAAEmC,SAAF,CAAY,eAAZ,CAArB;AACAiC,MAAIzB,mBAAJ,CAAwB,qBAAxB,EAA+C,KAAK4D,iBAAL,CAAuBE,IAAvB,CAA4B,IAA5B,CAA/C;AACA,EAJD;AAKAvF,OAAMyC,SAAN,GAAkB,UAASE,KAAT,EAAgB6C,SAAhB,EAA2B;AAC5C,MAAIC,SAAS,KAAK/E,QAAL,CAAcC,aAAd,CAA4B7B,EAAE8B,aAAF,CAAgB,6BAA6B+B,QAAQ,CAArC,IAA0C,GAA1D,CAA5B,CAAb;AACA,MAAIsB,WAAW,KAAK1B,YAAL,CAAkBI,KAAlB,CAAf;AACA,MAAIuB,QAAQuB,OAAO9E,aAAP,CAAqB,KAArB,CAAZ;AACA,OAAKqD,YAAL,CAAkBC,QAAlB,EAA4BC,KAA5B;AACA,MAAIsB,SAAJ,EAAe;AACd,OAAIE,OAAO,KAAKC,YAAL,CAAkB1B,QAAlB,CAAX;AACAC,SAAMpC,KAAN,CAAY8D,wBAAZ,GAAuC,KAAvC;AACA1B,SAAMpC,KAAN,CAAY8C,eAAZ,GAA8B,iBAAiBc,KAAKG,CAAtB,GAA0B,KAA1B,GAAkCH,KAAKI,CAAvC,GAA2C,cAA3C,GAA4D7B,SAASH,MAArE,GAA8E,GAA5G;AACAI,SAAME,YAAN;AACA;AACD,MAAI,CAACH,SAASR,MAAV,IAAoBS,MAAMf,YAAN,CAAmB,uBAAnB,CAAxB,EAAqE;AACpE,OAAIhC,OAAO,IAAX;AACAA,QAAKL,MAAL,CAAYC,SAAZ,CAAsBgF,GAAtB,CAA0BjH,EAAEmC,SAAF,CAAY,QAAZ,CAA1B;;AAEAiD,SAAMpC,KAAN,CAAY8D,wBAAZ,GAAuC,MAAvC;AACA1B,SAAMvC,gBAAN,CAAuB,qBAAvB,EAA8CR,KAAKkE,iBAAL,CAAuBE,IAAvB,CAA4BpE,IAA5B,CAA9C;AACA+C,SAAMpC,KAAN,CAAY8C,eAAZ,GAA8B,8BAA8BX,SAASH,MAAvC,GAAgD,GAA9E;AACA,QAAKkC,SAAL,CAAe9B,KAAf,EAAsB,YAAW;AAChCD,aAASR,MAAT,GAAkB,IAAlB;AACAS,UAAMd,GAAN,GAAYa,SAASV,QAArB;AACApC,SAAK8E,SAAL,CAAeR,MAAf,EAAuB,KAAKR,KAA5B,EAAmC,KAAKE,MAAxC;AACAjB,UAAMnD,SAAN,CAAgBgF,GAAhB,CAAoBjH,EAAEmC,SAAF,CAAY,eAAZ,CAApB;AACAiD,UAAMvC,gBAAN,CAAuB,qBAAvB,EAA8CR,KAAKkE,iBAAL,CAAuBE,IAAvB,CAA4BpE,IAA5B,CAA9C;AACA+C,UAAMgC,YAAN,CAAmB,OAAnB,EAA4B,EAA5B;AACAhC,UAAME,YAAN;AACAjD,SAAKL,MAAL,CAAYC,SAAZ,CAAsBC,MAAtB,CAA6BlC,EAAEmC,SAAF,CAAY,QAAZ,CAA7B;AACA,IATD;AAUA,GAjBD,MAiBO;AACNgD,YAASV,QAAT,KAAsBW,MAAMd,GAAN,GAAYa,SAASV,QAA3C;AACA,QAAK0C,SAAL,CAAeR,MAAf,EAAuBvB,MAAMe,KAA7B,EAAoCf,MAAMiB,MAA1C;AACAjB,SAAMnD,SAAN,CAAgBgF,GAAhB,CAAoBjH,EAAEmC,SAAF,CAAY,eAAZ,CAApB;AACAiD,SAAMvC,gBAAN,CAAuB,qBAAvB,EAA8C,KAAK0D,iBAAL,CAAuBE,IAAvB,CAA4B,IAA5B,CAA9C;AACArB,SAAMgC,YAAN,CAAmB,OAAnB,EAA4B,EAA5B;AACAhC,SAAME,YAAN;AACA;AACD,OAAK+B,YAAL,CAAkBxD,QAAQ,CAA1B;AACA,OAAKwD,YAAL,CAAkBxD,QAAQ,CAA1B;AACA,EAtCD;AAuCA3C,OAAMmG,YAAN,GAAqB,UAASxD,KAAT,EAAgB;AACpC,MAAI8C,SAAS,KAAK/E,QAAL,CAAcC,aAAd,CAA4B7B,EAAE8B,aAAF,CAAgB,6BAA6B+B,QAAQ,CAArC,IAA0C,GAA1D,CAA5B,CAAb;AACA,MAAI8C,MAAJ,EAAY;AACX,OAAIxB,WAAW,KAAK1B,YAAL,CAAkBI,KAAlB,CAAf;AACA,OAAI,CAACsB,SAASP,MAAd,EAAsB;AACrB,QAAIQ,QAAQuB,OAAO9E,aAAP,CAAqB,KAArB,CAAZ;AACA,SAAKqD,YAAL,CAAkBC,QAAlB,EAA4BC,KAA5B;AACA;AACD;AACD,EATD;AAUAlE,OAAMiG,SAAN,GAAkB,UAASG,aAAT,EAAwBC,WAAxB,EAAqCC,YAArC,EAAmD;AACpE,MAAI,CAAC,KAAK9G,OAAL,CAAaG,IAAlB,EAAwB;AACvB;AACA;AACD,MAAIyG,cAAcjD,YAAd,CAA2B,aAA3B,CAAJ,EAA+C;AAC9C;AACA;AACD,MAAIoD,SAASH,cAAczF,aAAd,CAA4B7B,EAAE8B,aAAF,CAAgB,OAAhB,CAA5B,CAAb;AACA,MAAI2F,OAAOC,OAAP,KAAmB,KAAvB,EAA8B;AAC7B,OAAIrF,OAAO,IAAX;AACA,OAAIsF,UAAUtF,KAAK0D,SAAL,CAAe;AAC5BI,WAAOmB,cAAcjC,WADO;AAE5BgB,YAAQiB,cAAchC;AAFM,IAAf,EAGX;AACFa,WAAOoB,WADL;AAEFlB,YAAQmB;AAFN,IAHW,CAAd;AAOAxH,KAAEsH,aAAF,EAAiBzG,IAAjB,CAAsB;AACrB8G,aAASjC,KAAKC,GAAL,CAASgC,OAAT,EAAkB,CAAlB;AADY,IAAtB;AAGA,GAZD,MAYO;AACN3H,KAAEsH,aAAF,EAAiBzG,IAAjB;AACA;AACD,EAvBD;AAwBAK,OAAMgG,SAAN,GAAkB,UAAS9B,KAAT,EAAgBwC,QAAhB,EAA0B;AAC3C,MAAIC,UAAU,SAAVA,OAAU,GAAW;AACxBD,eAAYA,SAASE,IAAT,CAAc,IAAd,CAAZ;AACA,GAFD;AAGA,MAAI1D,MAAM,IAAI2D,KAAJ,EAAV;AACA3D,MAAI4D,MAAJ,GAAaH,OAAb;AACAzD,MAAI6D,OAAJ,GAAcJ,OAAd;AACAzD,MAAIE,GAAJ,GAAUc,MAAMf,YAAN,CAAmB,uBAAnB,CAAV;AACA,EARD;AASAnD,OAAMgH,eAAN,GAAwB,UAASrE,KAAT,EAAgBH,MAAhB,EAAwB;AAC/C,SAAO;AACNsC,SAAM,CADA;AAENC,OAAIvC,SAAS;AAFP,GAAP;AAkBA,EAnBD;;AAqBAxC,OAAM2F,YAAN,GAAqB,UAAS1B,QAAT,EAAmB;AACvC,MAAIJ,QAAQI,SAASJ,KAAT,GAAiB9E,OAAOkI,WAApC;AACA,MAAIrD,OAAOK,SAASL,IAAT,GAAgB7E,OAAOmI,WAAlC;AACA,MAAI3C,OAAO,CAACxF,OAAO2F,UAAP,GAAoBT,SAASP,MAA9B,IAAwC,CAAnD;AACA,MAAIY,MAAM,CAACvF,OAAO4F,WAAP,GAAqBV,SAASN,OAA/B,IAA0C,CAApD;AACA,SAAO;AACNY,SAAMV,KADA;AAENS,QAAKV,IAFC;AAGNiC,MAAGhC,QAAQU,IAHL;AAINuB,MAAGlC,OAAOU;AAJJ,GAAP;AAMA,EAXD;AAYAtE,OAAMmH,OAAN,GAAgB,UAASxE,KAAT,EAAgByE,UAAhB,EAA4B;AAC3C,OAAK7E,YAAL,GAAoB6E,UAApB;;AAEA,MAAI5E,SAAS4E,WAAW5E,MAAxB;AACA,MAAI6E,WAAW,EAAf;AACA,MAAIC,eAAe,KAAKN,eAAL,CAAqBrE,KAArB,EAA4BH,MAA5B,CAAnB;AACA,MAAIsC,OAAOwC,aAAaxC,IAAxB;AACA,MAAIC,KAAKuC,aAAavC,EAAb,GAAkB,CAA3B;AACA,MAAIwC,eAAe5E,KAAnB;AACA,MAAI1B,YAAY,EAAhB;AACA,MAAIuG,UAAU,EAAd;AACA,MAAIC,SAAS1I,OAAO2F,UAApB;AACA,MAAIgD,UAAU3I,OAAO4F,WAArB;AACA,OAAK,IAAI5B,IAAI,CAAb,EAAgB+B,OAAOC,EAAvB,EAA2BD,QAAQ/B,GAAnC,EAAwC;AACvC,OAAIkB,WAAWmD,WAAWtC,IAAX,CAAf;AACA,OAAIhD,QAAQ,EAAZ;AACA,OAAImC,SAASP,MAAb,EAAqB;AACpB5B,YAAQ,gDAAgDmC,SAASH,MAAzD,GAAkE,uCAAlE,GAA4GG,SAASH,MAArH,GAA8H,GAAtI;AACA;AACD0D,aAAUvI,aAAaoB,OAAb,CAAqB,SAArB,EAAgC4D,SAASb,GAAzC,EAA8C/C,OAA9C,CAAsD,cAAtD,EAAsE4D,SAASV,QAA/E,EAAyFlD,OAAzF,CAAiG,WAAjG,EAA8GyB,KAA9G,CAAV;AACA,OAAIgD,SAASnC,KAAb,EAAoB;AACnB4E,mBAAexE,CAAf;AACA9B,gBAAYnC,EAAEmC,SAAF,CAAY,QAAZ,CAAZ;AACA,IAHD,MAGO;AACNA,gBAAY,EAAZ;AACA;AACDoG,YAAS/D,IAAT,CAAckE,QAAQnH,OAAR,CAAgB,eAAhB,EAAiCY,SAAjC,CAAd;AACA;AACD,OAAKP,QAAL,CAAcN,SAAd,GAA0BiH,SAASM,IAAT,CAAc,EAAd,CAA1B;AACA,OAAKlH,OAAL,CAAaqB,KAAb,CAAmBC,OAAnB,GAA6B,OAA7B;AACA,OAAKtB,OAAL,CAAaM,SAAb,CAAuBgF,GAAvB,CAA2BjH,EAAEmC,SAAF,CAAY,YAAZ,CAA3B;AACA,OAAKiB,SAAL,GAAiBqF,YAAjB;AACA,OAAK9G,OAAL,CAAa2D,YAAb;AACAtF,IAAE,KAAK2B,OAAP,EAAgBmH,MAAhB,GAAyBC,QAAzB,CAAkCN,YAAlC,EAAgD,CAAhD;AACA,OAAK1G,SAAL,KAAmB,KAAKA,SAAL,CAAeyB,SAAf,GAA4BiF,eAAe,CAAhB,GAAqB,GAArB,GAA2B,KAAKhF,YAAL,CAAkBC,MAA3F;AACA,OAAKC,SAAL,CAAe8E,YAAf,EAA6B,IAA7B;AACA,EApCD;AAqCAvH,OAAM8H,WAAN,GAAoB,UAASnF,KAAT,EAAgBD,KAAhB,EAAuB;AAC1CC,UAAQ6B,KAAKuD,GAAL,CAASvD,KAAKC,GAAL,CAAS,CAAT,EAAY9B,KAAZ,CAAT,EAA6B,KAAKC,MAAL,CAAYF,KAAZ,EAAmBF,MAAnB,GAA4B,CAAzD,CAAR;AACA,OAAK2E,OAAL,CAAaxE,KAAb,EAAoB,KAAKC,MAAL,CAAYF,KAAZ,CAApB;AACA,EAHD;AAIA1C,OAAMqB,IAAN,GAAa,UAASsB,KAAT,EAAgBD,KAAhB,EAAuB;AACnC,MAAI,KAAKsF,OAAL,EAAJ,EAAoB;AACnB;AACA;AACD,MAAI,OAAOrF,KAAP,KAAiB,QAArB,EAA+B;AAC9BD,WAAQA,SAASxD,gBAAjB;AACA,QAAKgC,SAAL,CAAewB,KAAf,EAAsBC,KAAtB;AACA,QAAKmF,WAAL,CAAiBnF,KAAjB,EAAwBD,KAAxB;AACA,GAJD,MAIO;AACNA,WAAQC,MAAMQ,YAAN,CAAmB,oBAAnB,CAAR;AACAT,WAAQA,SAASxD,gBAAjB;AACA,QAAKgC,SAAL,CAAewB,KAAf,EAAsBC,KAAtB;AACA,QAAKmF,WAAL,CAAiB,KAAKlF,MAAL,CAAYF,KAAZ,EAAmBuF,OAAnB,CAA2BtF,MAAMU,cAAjC,CAAjB,EAAmEX,KAAnE;AACA;AACD,EAdD;AAeA1C,OAAM0B,KAAN,GAAc,UAASiB,KAAT,EAAgBD,KAAhB,EAAuB;AACpC,MAAI,CAAC,KAAKsF,OAAL,EAAL,EAAqB;AACpB;AACA;AACD,OAAKvH,OAAL,CAAaM,SAAb,CAAuBC,MAAvB,CAA8BlC,EAAEmC,SAAF,CAAY,YAAZ,CAA9B;AACA,OAAKR,OAAL,CAAaM,SAAb,CAAuBgF,GAAvB,CAA2BjH,EAAEmC,SAAF,CAAY,aAAZ,CAA3B;AACA,MAAIwE,SAAS,KAAK/E,QAAL,CAAcC,aAAd,CAA4B7B,EAAE8B,aAAF,CAAgB,6BAA6B,KAAKsB,SAAL,GAAiB,CAA9C,IAAmD,GAAnE,CAA5B,CAAb;AACA,MAAIgC,QAAQuB,OAAO9E,aAAP,CAAqB,KAArB,CAAZ;AACA,MAAIuD,KAAJ,EAAW;AACVA,SAAMnD,SAAN,CAAgBgF,GAAhB,CAAoBjH,EAAEmC,SAAF,CAAY,eAAZ,CAApB;AACA,OAAIgD,WAAW,KAAK1B,YAAL,CAAkB,KAAKL,SAAvB,CAAf;AACA,OAAIwD,OAAO,KAAKC,YAAL,CAAkB1B,QAAlB,CAAX;AACA,OAAIJ,QAAQ6B,KAAKnB,IAAjB;AACA,OAAIX,OAAO8B,KAAKpB,GAAhB;AACA,OAAIV,OAAO7E,OAAO4F,WAAd,IAA6Bd,QAAQ9E,OAAO2F,UAA5C,IAA0Dd,OAAO,CAAjE,IAAsEC,QAAQ,CAAlF,EAAqF;AACpFK,UAAMpC,KAAN,CAAYoG,OAAZ,GAAsB,CAAtB;AACAhE,UAAMpC,KAAN,CAAY8D,wBAAZ,GAAuC,MAAvC;AACA1B,UAAMpC,KAAN,CAAY8C,eAAZ,GAA8B,WAAWX,SAASH,MAApB,GAA6B,GAA3D;AACA,IAJD,MAIO;AACN,QAAI,KAAKtE,OAAL,CAAaG,IAAjB,EAAuB;AACtBb,OAAEoF,MAAMiE,UAAN,CAAiBA,UAAnB,EAA+BxI,IAA/B,GAAsCyI,UAAtC,CAAiD,CAAjD;AACA;AACDlE,UAAMpC,KAAN,CAAY8D,wBAAZ,GAAuC,MAAvC;AACA1B,UAAMpC,KAAN,CAAY8C,eAAZ,GAA8B,iBAAiBc,KAAKG,CAAtB,GAA0B,KAA1B,GAAkCH,KAAKI,CAAvC,GAA2C,cAA3C,GAA4D7B,SAASH,MAArE,GAA8E,GAA5G;AACA;AACD;AACD,MAAIuE,UAAU,KAAK5H,OAAL,CAAaqC,gBAAb,CAA8BhE,EAAE8B,aAAF,CAAgB,eAAhB,CAA9B,CAAd;AACA,OAAK,IAAImC,IAAI,CAAR,EAAWC,MAAMqF,QAAQ7F,MAA9B,EAAsCO,IAAIC,GAA1C,EAA+CD,GAA/C,EAAoD;AACnDjE,KAAEuJ,QAAQtF,CAAR,CAAF,EAAcpD,IAAd,GAAqB2I,OAArB;AACA;AACDxJ,IAAE,KAAK2B,OAAP,EAAgBmH,MAAhB,GAAyBU,OAAzB;AAEA,EAhCD;AAiCAtI,OAAMgI,OAAN,GAAgB,YAAW;AAC1B,SAAO,KAAKvH,OAAL,CAAaM,SAAb,CAAuBc,QAAvB,CAAgC/C,EAAEmC,SAAF,CAAY,YAAZ,CAAhC,CAAP;AACA,EAFD;;AAIA,KAAIsH,kBAAkB,IAAtB;AACAzJ,GAAE0J,YAAF,GAAiB,UAAShJ,OAAT,EAAkB;AAClC,MAAI,CAAC+I,eAAL,EAAsB;AACrBA,qBAAkB,IAAIhJ,YAAJ,CAAiBC,OAAjB,CAAlB;AACA;AACD,SAAO+I,eAAP;AACA,EALD;AAMAzJ,GAAE2J,eAAF,GAAoB,YAAW;AAC9B,SAAOF,eAAP;AACA,EAFD;AAIA,CA7XD,EA6XGG,GA7XH,EA6XQ3J,MA7XR","file":"mui.previewimage.js","sourceRoot":"C:/Users/dell/AppData/Roaming/HBuilder/userprofiles/18710095921@163.com/appTemplate/unpackage","sourcesContent":["(function($, window) {\n\n\tvar template = '<div id=\"{{id}}\" class=\"mui-slider mui-preview-image mui-fullscreen\"><div class=\"mui-preview-header\">{{header}}</div><div class=\"mui-slider-group\"></div><div class=\"mui-preview-footer mui-hidden\">{{footer}}</div><div class=\"mui-preview-loading\"><span class=\"mui-spinner mui-spinner-white\"></span></div></div>';\n\tvar itemTemplate = '<div class=\"mui-slider-item mui-zoom-wrapper {{className}}\"><div class=\"mui-zoom-scroller\"><img src=\"{{src}}\" data-preview-lazyload=\"{{lazyload}}\" style=\"{{style}}\" class=\"mui-zoom\"></div></div>';\n\tvar defaultGroupName = '__DEFAULT';\n\tvar div = document.createElement('div');\n\tvar imgId = 0;\n\tvar PreviewImage = function(options) {\n\t\tthis.options = $.extend(true, {\n\t\t\tid: '__MUI_PREVIEWIMAGE',\n\t\t\tzoom: true,\n\t\t\theader: '<span class=\"mui-preview-indicator\"></span>',\n\t\t\tfooter: ''\n\t\t}, options || {});\n\t\tthis.init();\n\t\tthis.initEvent();\n\t};\n\tvar proto = PreviewImage.prototype;\n\tproto.init = function() {\n\t\tvar options = this.options;\n\t\tvar el = document.getElementById(this.options.id);\n\t\tif (!el) {\n\t\t\tdiv.innerHTML = template.replace(/\\{\\{id\\}\\}/g, this.options.id).replace('{{header}}', options.header).replace('{{footer}}', options.footer);\n\t\t\tdocument.body.appendChild(div.firstElementChild);\n\t\t\tel = document.getElementById(this.options.id);\n\t\t}\n\n\t\tthis.element = el;\n\t\tthis.scroller = this.element.querySelector($.classSelector('.slider-group'));\n\t\tthis.indicator = this.element.querySelector($.classSelector('.preview-indicator'));\n\t\tthis.loader = this.element.querySelector($.classSelector('.preview-loading'));\n\t\tif (options.footer) {\n\t\t\tthis.element.querySelector($.classSelector('.preview-footer')).classList.remove($.className('hidden'));\n\t\t}\n\t\tthis.addImages();\n\t};\n\tproto.initEvent = function() {\n\t\tvar self = this;\n\t\t$(document.body).on('tap', 'img[data-preview-src]', function() {\n\t\t\tself.open(this);\n\t\t\treturn false;\n\t\t});\n\t\tvar laterClose = null;\n\t\tvar laterCloseEvent = function() {\n\t\t\t!laterClose && (laterClose = $.later(function() {\n\t\t\t\tself.loader.removeEventListener('tap', laterCloseEvent);\n\t\t\t\tself.scroller.removeEventListener('tap', laterCloseEvent);\n\t\t\t\tself.close();\n\t\t\t}, 300));\n\t\t};\n\t\tthis.scroller.addEventListener('doubletap', function() {\n\t\t\tif (laterClose) {\n\t\t\t\tlaterClose.cancel();\n\t\t\t\tlaterClose = null;\n\t\t\t}\n\t\t});\n\t\tthis.element.addEventListener('webkitAnimationEnd', function() {\n\t\t\tif (self.element.classList.contains($.className('preview-out'))) { //close\n\t\t\t\tself.element.style.display = 'none';\n\t\t\t\tself.element.classList.remove($.className('preview-out'));\n\t\t\t\tself.element.classList.remove($.className('preview-in'));\n\t\t\t\tlaterClose = null;\n\t\t\t} else { //open\n\t\t\t\tself.loader.addEventListener('tap', laterCloseEvent);\n\t\t\t\tself.scroller.addEventListener('tap', laterCloseEvent);\n\t\t\t}\n\t\t});\n\t\tthis.element.addEventListener('slide', function(e) {\n\t\t\tif (self.options.zoom) {\n\t\t\t\tvar lastZoomerEl = self.element.querySelector('.mui-zoom-wrapper:nth-child(' + (self.lastIndex + 1) + ')');\n\t\t\t\tif (lastZoomerEl) {\n\t\t\t\t\t$(lastZoomerEl).zoom().setZoom(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar slideNumber = e.detail.slideNumber;\n\t\t\tself.lastIndex = slideNumber;\n\t\t\tself.indicator && (self.indicator.innerText = (slideNumber + 1) + '/' + self.currentGroup.length);\n\t\t\tself._loadItem(slideNumber);\n\n\t\t});\n\t};\n\tproto.addImages = function(group, index) {\n\t\tthis.groups = {};\n\t\tvar imgs = [];\n\t\tif (group) {\n\t\t\tif (group === defaultGroupName) {\n\t\t\t\timgs = document.querySelectorAll(\"img[data-preview-src]:not([data-preview-group])\");\n\t\t\t} else {\n\t\t\t\timgs = document.querySelectorAll(\"img[data-preview-src][data-preview-group='\" + group + \"']\");\n\t\t\t}\n\t\t} else {\n\t\t\timgs = document.querySelectorAll(\"img[data-preview-src]\");\n\t\t}\n\t\tif (imgs.length) {\n\t\t\tfor (var i = 0, len = imgs.length; i < len; i++) {\n\t\t\t\tthis.addImage(imgs[i]);\n\t\t\t}\n\t\t}\n\t};\n\tproto.addImage = function(img) {\n\t\tvar group = img.getAttribute('data-preview-group');\n\t\tgroup = group || defaultGroupName;\n\t\tif (!this.groups[group]) {\n\t\t\tthis.groups[group] = [];\n\t\t}\n\t\tvar src = img.getAttribute('src');\n\t\tif (img.__mui_img_data && img.__mui_img_data.src === src) { //已缓存且图片未变化\n\t\t\tthis.groups[group].push(img.__mui_img_data);\n\t\t} else {\n\t\t\tvar lazyload = img.getAttribute('data-preview-src');\n\t\t\tif (!lazyload) {\n\t\t\t\tlazyload = src;\n\t\t\t}\n\t\t\tvar imgObj = {\n\t\t\t\tsrc: src,\n\t\t\t\tlazyload: src === lazyload ? '' : lazyload,\n\t\t\t\tloaded: src === lazyload ? true : false,\n\t\t\t\tsWidth: 0,\n\t\t\t\tsHeight: 0,\n\t\t\t\tsTop: 0,\n\t\t\t\tsLeft: 0,\n\t\t\t\tsScale: 1,\n\t\t\t\tel: img\n\t\t\t};\n\t\t\tthis.groups[group].push(imgObj);\n\t\t\timg.__mui_img_data = imgObj;\n\t\t}\n\t};\n\n\n\tproto.empty = function() {\n\t\tthis.scroller.innerHTML = '';\n\t};\n\tproto._initImgData = function(itemData, imgEl) {\n\t\tif (!itemData.sWidth) {\n\t\t\tvar img = itemData.el;\n\t\t\titemData.sWidth = img.offsetWidth;\n\t\t\titemData.sHeight = img.offsetHeight;\n\t\t\tvar offset = $.offset(img);\n\t\t\titemData.sTop = offset.top;\n\t\t\titemData.sLeft = offset.left;\n\t\t\titemData.sScale = Math.max(itemData.sWidth / window.innerWidth, itemData.sHeight / window.innerHeight);\n\t\t}\n\t\timgEl.style.webkitTransform = 'translate3d(0,0,0) scale(' + itemData.sScale + ')';\n\t};\n\n\tproto._getScale = function(from, to) {\n\t\tvar scaleX = from.width / to.width;\n\t\tvar scaleY = from.height / to.height;\n\t\tvar scale = 1;\n\t\tif (scaleX <= scaleY) {\n\t\t\tscale = from.height / (to.height * scaleX);\n\t\t} else {\n\t\t\tscale = from.width / (to.width * scaleY);\n\t\t}\n\t\treturn scale;\n\t};\n\tproto._imgTransitionEnd = function(e) {\n\t\tvar img = e.target;\n\t\timg.classList.remove($.className('transitioning'));\n\t\timg.removeEventListener('webkitTransitionEnd', this._imgTransitionEnd.bind(this));\n\t};\n\tproto._loadItem = function(index, isOpening) { //TODO 暂时仅支持img\n\t\tvar itemEl = this.scroller.querySelector($.classSelector('.slider-item:nth-child(' + (index + 1) + ')'));\n\t\tvar itemData = this.currentGroup[index];\n\t\tvar imgEl = itemEl.querySelector('img');\n\t\tthis._initImgData(itemData, imgEl);\n\t\tif (isOpening) {\n\t\t\tvar posi = this._getPosition(itemData);\n\t\t\timgEl.style.webkitTransitionDuration = '0ms';\n\t\t\timgEl.style.webkitTransform = 'translate3d(' + posi.x + 'px,' + posi.y + 'px,0) scale(' + itemData.sScale + ')';\n\t\t\timgEl.offsetHeight;\n\t\t}\n\t\tif (!itemData.loaded && imgEl.getAttribute('data-preview-lazyload')) {\n\t\t\tvar self = this;\n\t\t\tself.loader.classList.add($.className('active'));\n\t\t\t//移动位置动画\n\t\t\timgEl.style.webkitTransitionDuration = '0.5s';\n\t\t\timgEl.addEventListener('webkitTransitionEnd', self._imgTransitionEnd.bind(self));\n\t\t\timgEl.style.webkitTransform = 'translate3d(0,0,0) scale(' + itemData.sScale + ')';\n\t\t\tthis.loadImage(imgEl, function() {\n\t\t\t\titemData.loaded = true;\n\t\t\t\timgEl.src = itemData.lazyload;\n\t\t\t\tself._initZoom(itemEl, this.width, this.height);\n\t\t\t\timgEl.classList.add($.className('transitioning'));\n\t\t\t\timgEl.addEventListener('webkitTransitionEnd', self._imgTransitionEnd.bind(self));\n\t\t\t\timgEl.setAttribute('style', '');\n\t\t\t\timgEl.offsetHeight;\n\t\t\t\tself.loader.classList.remove($.className('active'));\n\t\t\t});\n\t\t} else {\n\t\t\titemData.lazyload && (imgEl.src = itemData.lazyload);\n\t\t\tthis._initZoom(itemEl, imgEl.width, imgEl.height);\n\t\t\timgEl.classList.add($.className('transitioning'));\n\t\t\timgEl.addEventListener('webkitTransitionEnd', this._imgTransitionEnd.bind(this));\n\t\t\timgEl.setAttribute('style', '');\n\t\t\timgEl.offsetHeight;\n\t\t}\n\t\tthis._preloadItem(index + 1);\n\t\tthis._preloadItem(index - 1);\n\t};\n\tproto._preloadItem = function(index) {\n\t\tvar itemEl = this.scroller.querySelector($.classSelector('.slider-item:nth-child(' + (index + 1) + ')'));\n\t\tif (itemEl) {\n\t\t\tvar itemData = this.currentGroup[index];\n\t\t\tif (!itemData.sWidth) {\n\t\t\t\tvar imgEl = itemEl.querySelector('img');\n\t\t\t\tthis._initImgData(itemData, imgEl);\n\t\t\t}\n\t\t}\n\t};\n\tproto._initZoom = function(zoomWrapperEl, zoomerWidth, zoomerHeight) {\n\t\tif (!this.options.zoom) {\n\t\t\treturn;\n\t\t}\n\t\tif (zoomWrapperEl.getAttribute('data-zoomer')) {\n\t\t\treturn;\n\t\t}\n\t\tvar zoomEl = zoomWrapperEl.querySelector($.classSelector('.zoom'));\n\t\tif (zoomEl.tagName === 'IMG') {\n\t\t\tvar self = this;\n\t\t\tvar maxZoom = self._getScale({\n\t\t\t\twidth: zoomWrapperEl.offsetWidth,\n\t\t\t\theight: zoomWrapperEl.offsetHeight\n\t\t\t}, {\n\t\t\t\twidth: zoomerWidth,\n\t\t\t\theight: zoomerHeight\n\t\t\t});\n\t\t\t$(zoomWrapperEl).zoom({\n\t\t\t\tmaxZoom: Math.max(maxZoom, 1)\n\t\t\t});\n\t\t} else {\n\t\t\t$(zoomWrapperEl).zoom();\n\t\t}\n\t};\n\tproto.loadImage = function(imgEl, callback) {\n\t\tvar onReady = function() {\n\t\t\tcallback && callback.call(this);\n\t\t};\n\t\tvar img = new Image();\n\t\timg.onload = onReady;\n\t\timg.onerror = onReady;\n\t\timg.src = imgEl.getAttribute('data-preview-lazyload');\n\t};\n\tproto.getRangeByIndex = function(index, length) {\n\t\treturn {\n\t\t\tfrom: 0,\n\t\t\tto: length - 1\n\t\t};\n\t\t//\t\tvar from = Math.max(index - 1, 0);\n\t\t//\t\tvar to = Math.min(index + 1, length);\n\t\t//\t\tif (index === length - 1) {\n\t\t//\t\t\tfrom = Math.max(length - 3, 0);\n\t\t//\t\t\tto = length - 1;\n\t\t//\t\t}\n\t\t//\t\tif (index === 0) {\n\t\t//\t\t\tfrom = 0;\n\t\t//\t\t\tto = Math.min(2, length - 1);\n\t\t//\t\t}\n\t\t//\t\treturn {\n\t\t//\t\t\tfrom: from,\n\t\t//\t\t\tto: to\n\t\t//\t\t};\n\t};\n\n\tproto._getPosition = function(itemData) {\n\t\tvar sLeft = itemData.sLeft - window.pageXOffset;\n\t\tvar sTop = itemData.sTop - window.pageYOffset;\n\t\tvar left = (window.innerWidth - itemData.sWidth) / 2;\n\t\tvar top = (window.innerHeight - itemData.sHeight) / 2;\n\t\treturn {\n\t\t\tleft: sLeft,\n\t\t\ttop: sTop,\n\t\t\tx: sLeft - left,\n\t\t\ty: sTop - top\n\t\t};\n\t};\n\tproto.refresh = function(index, groupArray) {\n\t\tthis.currentGroup = groupArray;\n\t\t//重新生成slider\n\t\tvar length = groupArray.length;\n\t\tvar itemHtml = [];\n\t\tvar currentRange = this.getRangeByIndex(index, length);\n\t\tvar from = currentRange.from;\n\t\tvar to = currentRange.to + 1;\n\t\tvar currentIndex = index;\n\t\tvar className = '';\n\t\tvar itemStr = '';\n\t\tvar wWidth = window.innerWidth;\n\t\tvar wHeight = window.innerHeight;\n\t\tfor (var i = 0; from < to; from++, i++) {\n\t\t\tvar itemData = groupArray[from];\n\t\t\tvar style = '';\n\t\t\tif (itemData.sWidth) {\n\t\t\t\tstyle = '-webkit-transform:translate3d(0,0,0) scale(' + itemData.sScale + ');transform:translate3d(0,0,0) scale(' + itemData.sScale + ')';\n\t\t\t}\n\t\t\titemStr = itemTemplate.replace('{{src}}', itemData.src).replace('{{lazyload}}', itemData.lazyload).replace('{{style}}', style);\n\t\t\tif (from === index) {\n\t\t\t\tcurrentIndex = i;\n\t\t\t\tclassName = $.className('active');\n\t\t\t} else {\n\t\t\t\tclassName = '';\n\t\t\t}\n\t\t\titemHtml.push(itemStr.replace('{{className}}', className));\n\t\t}\n\t\tthis.scroller.innerHTML = itemHtml.join('');\n\t\tthis.element.style.display = 'block';\n\t\tthis.element.classList.add($.className('preview-in'));\n\t\tthis.lastIndex = currentIndex;\n\t\tthis.element.offsetHeight;\n\t\t$(this.element).slider().gotoItem(currentIndex, 0);\n\t\tthis.indicator && (this.indicator.innerText = (currentIndex + 1) + '/' + this.currentGroup.length);\n\t\tthis._loadItem(currentIndex, true);\n\t};\n\tproto.openByGroup = function(index, group) {\n\t\tindex = Math.min(Math.max(0, index), this.groups[group].length - 1);\n\t\tthis.refresh(index, this.groups[group]);\n\t};\n\tproto.open = function(index, group) {\n\t\tif (this.isShown()) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof index === \"number\") {\n\t\t\tgroup = group || defaultGroupName;\n\t\t\tthis.addImages(group, index); //刷新当前group\n\t\t\tthis.openByGroup(index, group);\n\t\t} else {\n\t\t\tgroup = index.getAttribute('data-preview-group');\n\t\t\tgroup = group || defaultGroupName;\n\t\t\tthis.addImages(group, index); //刷新当前group\n\t\t\tthis.openByGroup(this.groups[group].indexOf(index.__mui_img_data), group);\n\t\t}\n\t};\n\tproto.close = function(index, group) {\n\t\tif (!this.isShown()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.element.classList.remove($.className('preview-in'));\n\t\tthis.element.classList.add($.className('preview-out'));\n\t\tvar itemEl = this.scroller.querySelector($.classSelector('.slider-item:nth-child(' + (this.lastIndex + 1) + ')'));\n\t\tvar imgEl = itemEl.querySelector('img');\n\t\tif (imgEl) {\n\t\t\timgEl.classList.add($.className('transitioning'));\n\t\t\tvar itemData = this.currentGroup[this.lastIndex];\n\t\t\tvar posi = this._getPosition(itemData);\n\t\t\tvar sLeft = posi.left;\n\t\t\tvar sTop = posi.top;\n\t\t\tif (sTop > window.innerHeight || sLeft > window.innerWidth || sTop < 0 || sLeft < 0) { //out viewport\n\t\t\t\timgEl.style.opacity = 0;\n\t\t\t\timgEl.style.webkitTransitionDuration = '0.5s';\n\t\t\t\timgEl.style.webkitTransform = 'scale(' + itemData.sScale + ')';\n\t\t\t} else {\n\t\t\t\tif (this.options.zoom) {\n\t\t\t\t\t$(imgEl.parentNode.parentNode).zoom().toggleZoom(0);\n\t\t\t\t}\n\t\t\t\timgEl.style.webkitTransitionDuration = '0.5s';\n\t\t\t\timgEl.style.webkitTransform = 'translate3d(' + posi.x + 'px,' + posi.y + 'px,0) scale(' + itemData.sScale + ')';\n\t\t\t}\n\t\t}\n\t\tvar zoomers = this.element.querySelectorAll($.classSelector('.zoom-wrapper'));\n\t\tfor (var i = 0, len = zoomers.length; i < len; i++) {\n\t\t\t$(zoomers[i]).zoom().destroy();\n\t\t}\n\t\t$(this.element).slider().destroy();\n//\t\tthis.empty();\n\t};\n\tproto.isShown = function() {\n\t\treturn this.element.classList.contains($.className('preview-in'));\n\t};\n\n\tvar previewImageApi = null;\n\t$.previewImage = function(options) {\n\t\tif (!previewImageApi) {\n\t\t\tpreviewImageApi = new PreviewImage(options);\n\t\t}\n\t\treturn previewImageApi;\n\t};\n\t$.getPreviewImage = function() {\n\t\treturn previewImageApi;\n\t}\n\n})(mui, window);"]}